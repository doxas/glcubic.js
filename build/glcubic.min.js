function radian(){this.rad=[],this.sin=[],this.cos=[];for(var t=0;360>t;t++)this.rad.push(t*Math.PI/180),this.sin.push(Math.sin(this.rad[t])),this.cos.push(Math.cos(this.rad[t]))}function AudioCtr(t,e){return"undefined"==typeof webkitAudioContext&&"undefined"==typeof AudioContext?null:(this.ctx="undefined"!=typeof webkitAudioContext?new webkitAudioContext:new AudioContext,this.comp=this.ctx.createDynamicsCompressor(),this.comp.connect(this.ctx.destination),this.bgmGain=this.ctx.createGain(),this.bgmGain.connect(this.comp),this.bgmGain.gain.value=t,this.soundGain=this.ctx.createGain(),this.soundGain.connect(this.comp),this.soundGain.gain.value=e,this.src=new Array,void 0)}function AudioSrc(t,e,r,i){this.ctx=t,this.gain=e,this.audioBuffer=r,this.bufferSource=new Array,this.loop=i,this.loaded=!1}var gl3=gl3||{};gl3.PI=3.141592653589793,gl3.PI2=1.5707963267948966,gl3.PI4=.7853981633974483,gl3.BPI=6.283185307179586,gl3.ready=!1,gl3.canvas=null,gl3.gl=null,gl3.texture=null,gl3.initGL=function(t,e){var r=e||{};this.canvas=document.getElementById(t),null!=this.canvas&&(this.gl=this.canvas.getContext("webgl",r)||this.canvas.getContext("experimental-webgl",r),null!=this.gl&&(this.ready=!0,this.texture=new Array(this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS))))},gl3.scene_clear=function(t,e){var r=this.gl.COLOR_BUFFER_BIT;this.gl.clearColor(t[0],t[1],t[2],t[3]),null!=e&&(this.gl.clearDepth(e),this.gl.enable(this.gl.DEPTH_TEST),r|=this.gl.DEPTH_BUFFER_BIT),this.gl.clear(r)},gl3.scene_view=function(t,e,r){var i,n;i=null!=e?e:window.innerWidth,n=null!=r?r:window.innerHeight,this.canvas.width=i,this.canvas.height=n,this.gl.viewport(0,0,i,n),null!=t&&(t.aspect=i/n)},gl3.draw_elements=function(t){this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0)},gl3.bind_texture=function(t){this.gl.activeTexture(33984+t),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture[t])},gl3.program={create:function(t,e,r,i,n,o){if(null==gl3.gl)return null;var a,s=new gl3.programManager(gl3.gl);for(s.vs=s.create_shader(t),s.fs=s.create_shader(e),s.prg=s.create_program(s.vs,s.fs),s.attL=new Array(r.length),s.attS=new Array(r.length),a=0;a<r.length;a++)s.attL[a]=gl3.gl.getAttribLocation(s.prg,r[a]),s.attS[a]=i[a];for(s.uniL=new Array(n.length),a=0;a<n.length;a++)s.uniL[a]=gl3.gl.getUniformLocation(s.prg,n[a]);return s.uniT=o,s}},gl3.programManager=function(t){this.gl=t},gl3.programManager.prototype.gl=null,gl3.programManager.prototype.vs=null,gl3.programManager.prototype.fs=null,gl3.programManager.prototype.prg=null,gl3.programManager.prototype.attL=null,gl3.programManager.prototype.attS=null,gl3.programManager.prototype.uniL=null,gl3.programManager.prototype.uniT=null,gl3.programManager.prototype.create_shader=function(t){var e,r=document.getElementById(t);if(r){switch(r.type){case"x-shader/x-vertex":e=this.gl.createShader(this.gl.VERTEX_SHADER);break;case"x-shader/x-fragment":e=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}return this.gl.shaderSource(e,r.text),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)?e:void alert(this.gl.getShaderInfoLog(e))}},gl3.programManager.prototype.create_program=function(t,e){var r=this.gl.createProgram();return this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.useProgram(r),r):void alert(this.gl.getProgramInfoLog(r))},gl3.programManager.prototype.set_program=function(){this.gl.useProgram(this.prg)},gl3.programManager.prototype.set_attribute=function(t,e){for(var r in t)this.attL[r]>=0&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t[r]),this.gl.enableVertexAttribArray(this.attL[r]),this.gl.vertexAttribPointer(this.attL[r],this.attS[r],this.gl.FLOAT,!1,0,0));this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e)},gl3.programManager.prototype.push_shader=function(t){for(var e=0,r=this.uniT.length;r>e;e++)switch(this.uniT[e]){case"matrix4fv":this.gl.uniformMatrix4fv(this.uniL[e],!1,t[e]);break;case"4fv":this.gl.uniform4fv(this.uniL[e],t[e]);break;case"3fv":this.gl.uniform3fv(this.uniL[e],t[e]);break;case"2fv":this.gl.uniform2fv(this.uniL[e],t[e]);break;case"1fv":this.gl.uniform1fv(this.uniL[e],t[e]);break;case"1f":this.gl.uniform1f(this.uniL[e],t[e]);break;case"1iv":this.gl.uniform1iv(this.uniL[e],t[e]);break;case"1i":this.gl.uniform1i(this.uniL[e],t[e])}},gl3.util={hsva:function(t,e,r,i){if(!(e>1||r>1||i>1)){var n=t%360,o=Math.floor(n/60),a=n/60-o,s=r*(1-e),l=r*(1-e*a),u=r*(1-e*(1-a)),h=new Array;if(!e>0&&0>!e)h.push(r,r,r,i);else{var c=new Array(r,l,s,s,u,r),g=new Array(u,r,r,l,s,s),p=new Array(s,s,u,r,r,l);h.push(c[o],g[o],p[o],i)}return h}},easeLiner:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeOutCubic:function(t){return(t=t/1-1)*t*t+1},easeQuintic:function(t){var e=(t/=1)*t,r=e*t;return r*e}},gl3.v3=function(){},gl3.v3.prototype.create=function(){return new Float32Array(3)},gl3.v3.prototype.normalize=function(t){var e=this.create(),r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);if(r>0){var i=1/r;e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i}return e},gl3.v3.prototype.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},gl3.v3.prototype.cross=function(t,e){var r=this.create();return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=t[2]*e[0]-t[0]*e[2],r[2]=t[0]*e[1]-t[1]*e[0],r},gl3.v3.prototype.faceNormal=function(t,e,r){var i=this.create(),n=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],o=[r[0]-t[0],r[1]-t[1],r[2]-t[2]];return i[0]=n[1]*o[2]-n[2]*o[1],i[1]=n[2]*o[0]-n[0]*o[2],i[2]=n[0]*o[1]-n[1]*o[0],this.normalize(i)},gl3.vec3=new gl3.v3,gl3.m4=function(){},gl3.m4.prototype.create=function(){return new Float32Array(16)},gl3.m4.prototype.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},gl3.m4.prototype.multiply=function(t,e,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],g=t[9],p=t[10],f=t[11],v=t[12],m=t[13],y=t[14],d=t[15],b=e[0],M=e[1],S=e[2],A=e[3],w=e[4],x=e[5],P=e[6],_=e[7],L=e[8],T=e[9],E=e[10],I=e[11],C=e[12],q=e[13],D=e[14],R=e[15];return r[0]=b*i+M*s+S*c+A*v,r[1]=b*n+M*l+S*g+A*m,r[2]=b*o+M*u+S*p+A*y,r[3]=b*a+M*h+S*f+A*d,r[4]=w*i+x*s+P*c+_*v,r[5]=w*n+x*l+P*g+_*m,r[6]=w*o+x*u+P*p+_*y,r[7]=w*a+x*h+P*f+_*d,r[8]=L*i+T*s+E*c+I*v,r[9]=L*n+T*l+E*g+I*m,r[10]=L*o+T*u+E*p+I*y,r[11]=L*a+T*h+E*f+I*d,r[12]=C*i+q*s+D*c+R*v,r[13]=C*n+q*l+D*g+R*m,r[14]=C*o+q*u+D*p+R*y,r[15]=C*a+q*h+D*f+R*d,r},gl3.m4.prototype.scale=function(t,e,r){return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},gl3.m4.prototype.translate=function(t,e,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r},gl3.m4.prototype.rotate=function(t,e,r,i){var n=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!n)return null;var o=r[0],a=r[1],s=r[2];1!=n&&(n=1/n,o*=n,a*=n,s*=n);var l=Math.sin(e),u=Math.cos(e),h=1-u,c=t[0],g=t[1],p=t[2],f=t[3],v=t[4],m=t[5],y=t[6],d=t[7],b=t[8],M=t[9],S=t[10],A=t[11],w=o*o*h+u,x=a*o*h+s*l,P=s*o*h-a*l,_=o*a*h-s*l,L=a*a*h+u,T=s*a*h+o*l,E=o*s*h+a*l,I=a*s*h-o*l,C=s*s*h+u;return e?t!=i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]):i=t,i[0]=c*w+v*x+b*P,i[1]=g*w+m*x+M*P,i[2]=p*w+y*x+S*P,i[3]=f*w+d*x+A*P,i[4]=c*_+v*L+b*T,i[5]=g*_+m*L+M*T,i[6]=p*_+y*L+S*T,i[7]=f*_+d*L+A*T,i[8]=c*E+v*I+b*C,i[9]=g*E+m*I+M*C,i[10]=p*E+y*I+S*C,i[11]=f*E+d*I+A*C,i},gl3.m4.prototype.lookAt=function(t,e,r,i){var n=t[0],o=t[1],a=t[2],s=r[0],l=r[1],u=r[2],h=e[0],c=e[1],g=e[2];if(n==h&&o==c&&a==g)return this.identity(i);var p,f,v,m,y,d,b,M,S,A;return b=n-e[0],M=o-e[1],S=a-e[2],A=1/Math.sqrt(b*b+M*M+S*S),b*=A,M*=A,S*=A,p=l*S-u*M,f=u*b-s*S,v=s*M-l*b,A=Math.sqrt(p*p+f*f+v*v),A?(A=1/A,p*=A,f*=A,v*=A):(p=0,f=0,v=0),m=M*v-S*f,y=S*p-b*v,d=b*f-M*p,A=Math.sqrt(m*m+y*y+d*d),A?(A=1/A,m*=A,y*=A,d*=A):(m=0,y=0,d=0),i[0]=p,i[1]=m,i[2]=b,i[3]=0,i[4]=f,i[5]=y,i[6]=M,i[7]=0,i[8]=v,i[9]=d,i[10]=S,i[11]=0,i[12]=-(p*n+f*o+v*a),i[13]=-(m*n+y*o+d*a),i[14]=-(b*n+M*o+S*a),i[15]=1,i},gl3.m4.prototype.perspective=function(t,e,r,i,n){var o=r*Math.tan(t*Math.PI/360),a=o*e,s=2*a,l=2*o,u=i-r;return n[0]=2*r/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*r/l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-(i+r)/u,n[11]=-1,n[12]=0,n[13]=0,n[14]=-(i*r*2)/u,n[15]=0,n},gl3.m4.prototype.ortho=function(t,e,r,i,n,o,a){var s=e-t,l=r-i,u=o-n;return a[0]=2/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-2/u,a[11]=0,a[12]=-(t+e)/s,a[13]=-(r+i)/l,a[14]=-(o+n)/u,a[15]=1,a},gl3.m4.prototype.transpose=function(t,e){return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},gl3.m4.prototype.inverse=function(t,e){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=t[9],g=t[10],p=t[11],f=t[12],v=t[13],m=t[14],y=t[15],d=r*s-i*a,b=r*l-n*a,M=r*u-o*a,S=i*l-n*s,A=i*u-o*s,w=n*u-o*l,x=h*v-c*f,P=h*m-g*f,_=h*y-p*f,L=c*m-g*v,T=c*y-p*v,E=g*y-p*m,I=1/(d*E-b*T+M*L+S*_-A*P+w*x);return e[0]=(s*E-l*T+u*L)*I,e[1]=(-i*E+n*T-o*L)*I,e[2]=(v*w-m*A+y*S)*I,e[3]=(-c*w+g*A-p*S)*I,e[4]=(-a*E+l*_-u*P)*I,e[5]=(r*E-n*_+o*P)*I,e[6]=(-f*w+m*M-y*b)*I,e[7]=(h*w-g*M+p*b)*I,e[8]=(a*T-s*_+u*x)*I,e[9]=(-r*T+i*_-o*x)*I,e[10]=(f*A-v*M+y*d)*I,e[11]=(-h*A+c*M-p*d)*I,e[12]=(-a*L+s*P-l*x)*I,e[13]=(r*L-i*P+n*x)*I,e[14]=(-f*S+v*b-m*d)*I,e[15]=(h*S-c*b+g*d)*I,e},gl3.m4.prototype.vpFromCamera=function(t,e,r,i){this.lookAt(t.position,t.centerPoint,t.upDirection,e),this.perspective(t.fovy,t.aspect,t.near,t.far,r),this.multiply(r,e,i)},gl3.mat4=new gl3.m4,gl3.q4=function(){},gl3.q4.prototype.create=function(){return new Float32Array(4)},gl3.q4.prototype.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},gl3.q4.prototype.inverse=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},gl3.q4.prototype.normalize=function(t){var e=t[0],r=t[1],i=t[2],n=t[3],o=Math.sqrt(e*e+r*r+i*i+n*n);return 0===o?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):(o=1/o,t[0]=e*o,t[1]=r*o,t[2]=i*o,t[3]=n*o),t},gl3.q4.prototype.multiply=function(t,e,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=e[0],l=e[1],u=e[2],h=e[3];return r[0]=i*h+a*s+n*u-o*l,r[1]=n*h+a*l+o*s-i*u,r[2]=o*h+a*u+i*l-n*s,r[3]=a*h-i*s-n*l-o*u,r},gl3.q4.prototype.rotate=function(t,e,r){var i=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(!i)return null;var n=e[0],o=e[1],a=e[2];1!=i&&(i=1/i,n*=i,o*=i,a*=i);var s=Math.sin(.5*t);return r[0]=n*s,r[1]=o*s,r[2]=a*s,r[3]=Math.cos(.5*t),r},gl3.q4.prototype.toVecIII=function(t,e,r){var i=create(),n=create(),o=create();return inverse(e,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],multiply(o,i,n),multiply(n,e,o),r[0]=o[0],r[1]=o[1],r[2]=o[2],r},gl3.q4.prototype.toMatIV=function(t,e){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,l=n+n,u=r*a,h=r*s,c=r*l,g=i*s,p=i*l,f=n*l,v=o*a,m=o*s,y=o*l;return e[0]=1-(g+f),e[1]=h-y,e[2]=c+m,e[3]=0,e[4]=h+y,e[5]=1-(u+f),e[6]=p-v,e[7]=0,e[8]=c-m,e[9]=p+v,e[10]=1-(u+g),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},gl3.q4.prototype.slerp=function(t,e,r,i){var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],o=1-n*n;if(0>=o)i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3];else if(o=Math.sqrt(o),Math.abs(o)<1e-4)i[0]=.5*t[0]+.5*e[0],i[1]=.5*t[1]+.5*e[1],i[2]=.5*t[2]+.5*e[2],i[3]=.5*t[3]+.5*e[3];else{var a=Math.acos(n),s=a*r,l=Math.sin(a-s)/o,u=Math.sin(s)/o;i[0]=t[0]*l+e[0]*u,i[1]=t[1]*l+e[1]*u,i[2]=t[2]*l+e[2]*u,i[3]=t[3]*l+e[3]*u}return i},gl3.qtn=new gl3.q4,gl3.camera={create:function(t,e,r,i,n,o,a){var s=new gl3.cam,l=gl3.vec3.create();return l[0]=r[0],l[1]=r[1],l[2]=r[2],l=gl3.vec3.normalize(l),s.init(t,e,l,i,n,o,a),s}},gl3.cam=function(){},gl3.cam.prototype.position=gl3.vec3.create(),gl3.cam.prototype.centerPoint=gl3.vec3.create(),gl3.cam.prototype.upDirection=gl3.vec3.create(),gl3.cam.prototype.basePosition=gl3.vec3.create(),gl3.cam.prototype.baseCenterPoint=gl3.vec3.create(),gl3.cam.prototype.baseUpDirection=gl3.vec3.create(),gl3.cam.prototype.fovy=45,gl3.cam.prototype.aspect=1,gl3.cam.prototype.near=.1,gl3.cam.prototype.far=1,gl3.cam.prototype.init=function(t,e,r,i,n,o,a){this.position=gl3.vec3.create(),this.centerPoint=gl3.vec3.create(),this.upDirection=gl3.vec3.create(),this.basePosition=gl3.vec3.create(),this.baseCenterPoint=gl3.vec3.create(),this.baseUpDirection=gl3.vec3.create(),this.position[0]=this.basePosition[0]=t[0],this.position[1]=this.basePosition[1]=t[1],this.position[2]=this.basePosition[2]=t[2],this.centerPoint[0]=this.baseCenterPoint[0]=e[0],this.centerPoint[1]=this.baseCenterPoint[1]=e[1],this.centerPoint[2]=this.baseCenterPoint[2]=e[2],this.upDirection[0]=this.baseUpDirection[0]=r[0],this.upDirection[1]=this.baseUpDirection[1]=r[1],this.upDirection[2]=this.baseUpDirection[2]=r[2],this.fovy=i,this.aspect=n,this.near=o,this.far=a},gl3.cam.prototype.get_canvas_aspect=function(){return gl3.canvas?gl3.canvas.width/gl3.canvas.height:void 0},gl3.mesh={torus:function(t,e,r,i,n){var o,a,s,l=[],u=[],h=[],c=[],g=[];for(o=0;t>=o;o++){var p=2*Math.PI/t*o,f=Math.cos(p),v=Math.sin(p);for(a=0;e>=a;a++){var m=2*Math.PI/e*a,y=(f*r+i)*Math.cos(m),d=v*r,b=(f*r+i)*Math.sin(m),M=f*Math.cos(m),S=f*Math.sin(m);s=n?n:gl3.util.hsva(360/e*a,1,1,1);var A=1/e*a,w=1/t*o+.5;w>1&&(w-=1),w=1-w,l.push(y,d,b),u.push(M,v,S),h.push(s[0],s[1],s[2],s[3]),c.push(A,w)}}for(o=0;t>o;o++)for(a=0;e>a;a++)p=(e+1)*o+a,g.push(p,p+e+1,p+1),g.push(p+e+1,p+e+2,p+1);return{position:l,normal:u,color:h,texCoord:c,index:g}},sphere:function(t,e,r,i){var n,o,a,s=[],l=[],u=[],h=[],c=[];for(n=0;t>=n;n++){var g=Math.PI/t*n,p=Math.cos(g),f=Math.sin(g);for(o=0;e>=o;o++){var v=2*Math.PI/e*o,m=f*r*Math.cos(v),y=p*r,d=f*r*Math.sin(v),b=f*Math.cos(v),M=f*Math.sin(v);a=i?i:gl3.util.hsva(360/t*n,1,1,1),s.push(m,y,d),l.push(b,p,M),u.push(a[0],a[1],a[2],a[3]),h.push(1-1/e*o,1/t*n)}}for(g=0,n=0;t>n;n++)for(o=0;e>o;o++)g=(e+1)*n+o,c.push(g,g+1,g+e+2),c.push(g,g+e+2,g+e+1);return{position:s,normal:l,color:u,texCoord:h,index:c}},cube:function(t,e){for(var r,i=.5*t,n=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],a=[],s=0;s<n.length/3;s++)r=e?e:gl3.util.hsva(360/n.length/3*s,1,1,1),a.push(r[0],r[1],r[2],r[3]);var l=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],u=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{position:n,normal:o,color:a,texCoord:l,index:u}}},AudioCtr.prototype.load=function(t,e,r,i){var n=this.ctx,o=i?this.bgmGain:this.soundGain,a=this.src;a[e]=null;var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){n.decodeAudioData(s.response,function(t){a[e]=new AudioSrc(n,o,t,r),a[e].loaded=!0,console.log("audio loaded : index "+e+"; ")},function(t){console.log(t)})},s.send()},AudioCtr.prototype.loadComplete=function(){var t,e;for(e=!0,t=0;t<this.src.length;t++)e=e&&null!=this.src[t]&&this.src[t].loaded;return e},AudioSrc.prototype.play=function(){var t,e,r;if(t=this.bufferSource.length,r=-1,t>0){for(e=0;t>e;e++)if(!this.bufferSource[e].playnow){this.bufferSource[e]=null,this.bufferSource[e]=this.ctx.createBufferSource(),r=e;break}0>r&&(this.bufferSource[this.bufferSource.length]=this.ctx.createBufferSource(),r=this.bufferSource.length-1)}else this.bufferSource[0]=this.ctx.createBufferSource(),r=0;this.bufferSource[r].buffer=this.audioBuffer,this.bufferSource[r].loop=this.loop,this.bufferSource[r].playbackRate.value=1,this.loop||(this.bufferSource[r].onended=function(){this.stop(0),this.playnow=!1}),this.bufferSource[r].connect(this.gain),this.bufferSource[r].start(0),this.bufferSource[r].playnow=!0},AudioSrc.prototype.end=function(t){this.bufferSource[t].stop(0),this.playnow=!1};