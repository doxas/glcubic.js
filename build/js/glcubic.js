!function(e){function t(n){if(r[n])return r[n].exports;var l=r[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=5)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){if(n(this,e),this.ctx=null,this.comp=null,this.bgmGain=null,this.soundGain=null,this.src=null,"undefined"==typeof AudioContext&&"undefined"==typeof webkitAudioContext)throw new Error("not found AudioContext");"undefined"!=typeof AudioContext?this.ctx=new AudioContext:this.ctx=new webkitAudioContext,this.comp=this.ctx.createDynamicsCompressor(),this.comp.connect(this.ctx.destination),this.bgmGain=this.ctx.createGain(),this.bgmGain.connect(this.comp),this.bgmGain.gain.value=t,this.soundGain=this.ctx.createGain(),this.soundGain.connect(this.comp),this.soundGain.gain.value=r,this.src=[]}return l(e,[{key:"load",value:function(e,t,r,n,l){var o=this.ctx,i=n?this.bgmGain:this.soundGain,u=this.src;u[t]=null;var s=new XMLHttpRequest;s.open("GET",e,!0),s.setRequestHeader("Pragma","no-cache"),s.setRequestHeader("Cache-Control","no-cache"),s.responseType="arraybuffer",s.onload=function(){o.decodeAudioData(s.response,function(s){u[t]=new a(o,i,s,r,n),u[t].loaded=!0,console.log("%câ—†%c audio number: %c"+t+"%c, audio loaded: %c"+e,"color: crimson","","color: blue","","color: goldenrod"),l()},function(e){console.log(e)})},s.send()}},{key:"loadComplete",value:function(){var e=void 0,t=void 0;for(t=!0,e=0;e<this.src.length;e++)t=t&&null!=this.src[e]&&this.src[e].loaded;return t}}]),e}();t.default=o;var a=function(){function e(t,r,l,o,a){n(this,e),this.ctx=t,this.gain=r,this.audioBuffer=l,this.bufferSource=[],this.activeBufferSource=0,this.loop=o,this.loaded=!1,this.fftLoop=16,this.update=!1,this.background=a,this.node=this.ctx.createScriptProcessor(2048,1,1),this.analyser=this.ctx.createAnalyser(),this.analyser.smoothingTimeConstant=.8,this.analyser.fftSize=2*this.fftLoop,this.onData=new Uint8Array(this.analyser.frequencyBinCount)}return l(e,[{key:"play",value:function(){function e(e){o.update&&(o.update=!1,o.analyser.getByteFrequencyData(o.onData))}var t=this,r=void 0,n=void 0,l=void 0,o=this;if(r=this.bufferSource.length,l=-1,r>0){for(n=0;n<r;n++)if(!this.bufferSource[n].playnow){this.bufferSource[n]=null,this.bufferSource[n]=this.ctx.createBufferSource(),l=n;break}l<0&&(this.bufferSource[this.bufferSource.length]=this.ctx.createBufferSource(),l=this.bufferSource.length-1)}else this.bufferSource[0]=this.ctx.createBufferSource(),l=0;this.activeBufferSource=l,this.bufferSource[l].buffer=this.audioBuffer,this.bufferSource[l].loop=this.loop,this.bufferSource[l].playbackRate.value=1,this.loop||(this.bufferSource[l].onended=function(){t.stop(0),t.playnow=!1}),this.background&&(this.bufferSource[l].connect(this.analyser),this.analyser.connect(this.node),this.node.connect(this.ctx.destination),this.node.onaudioprocess=function(t){e(t)}),this.bufferSource[l].connect(this.gain),this.bufferSource[l].start(0),this.bufferSource[l].playnow=!0}},{key:"stop",value:function(){this.bufferSource[this.activeBufferSource].stop(0),this.playnow=!1}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(){o(this,e),this.Wrapper=u,this.Element=s,this.Slider=c,this.Checkbox=h,this.Select=f,this.Spin=d,this.Color=E};t.default=i;var u=function(){function e(){o(this,e),this.element=document.createElement("div"),this.element.style.backgroundColor="rgba(64, 64, 64, 0.5)",this.element.style.position="absolute",this.element.style.top="0px",this.element.style.right="0px",this.element.style.height="100%",this.element.style.overflow="auto"}return a(e,[{key:"getElement",value:function(){return this.element}}]),e}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o(this,e),this.element=document.createElement("div"),this.element.style.fontSize="small",this.element.style.textAlign="center",this.element.style.width="320px",this.element.style.height="30px",this.element.style.lineHeight="30px",this.element.style.display="flex",this.element.style.flexDirection="row",this.element.style.justifyContent="flex-start",this.label=document.createElement("span"),this.label.textContent=t,this.label.style.color="#222",this.label.style.textShadow="0px 0px 5px white",this.label.style.display="inline-block",this.label.style.margin="auto 5px",this.label.style.width="100px",this.label.style.overflow="hidden",this.element.appendChild(this.label),this.value=document.createElement("span"),this.value.style.backgroundColor="rgba(0, 0, 0, 0.25)",this.value.style.color="whitesmoke",this.value.style.fontSize="x-small",this.value.style.textShadow="0px 0px 5px black",this.value.style.display="inline-block",this.value.style.margin="auto 5px",this.value.style.width="50px",this.value.style.overflow="hidden",this.element.appendChild(this.value),this.control=null,this.text=t,this.listeners={}}return a(e,[{key:"add",value:function(e,t){null!=this.control&&null!=e&&null!=t&&"[object String]"===Object.prototype.toString.call(e)&&"[object Function]"===Object.prototype.toString.call(t)&&(this.listeners[e]=t)}},{key:"emit",value:function(e,t){null!=this.control&&this.listeners.hasOwnProperty(e)&&this.listeners[e](t,this)}},{key:"remove",value:function(){null!=this.control&&this.listeners.hasOwnProperty(type)&&(this.listeners[type]=null,delete this.listeners[type])}},{key:"setValue",value:function(e){this.value.textContent=e,this.control.value=e}},{key:"getValue",value:function(){return this.control.value}},{key:"getControl",value:function(){return this.control}},{key:"getText",value:function(){return this.text}},{key:"getElement",value:function(){return this.element}}]),e}(),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;o(this,t);var u=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.control=document.createElement("input"),u.control.setAttribute("type","range"),u.control.setAttribute("min",l),u.control.setAttribute("max",a),u.control.setAttribute("step",i),u.control.value=r,u.control.style.margin="auto",u.control.style.verticalAlign="middle",u.element.appendChild(u.control),u.setValue(u.control.value),u.control.addEventListener("input",function(e){u.emit("input",e),u.setValue(u.control.value)},!1),u}return l(t,e),a(t,[{key:"setMin",value:function(e){this.control.setAttribute("min",e)}},{key:"setMax",value:function(e){this.control.setAttribute("max",e)}},{key:"setStep",value:function(e){this.control.setAttribute("step",e)}}]),t}(s),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.control=document.createElement("input"),l.control.setAttribute("type","checkbox"),l.control.checked=r,l.control.style.margin="auto",l.control.style.verticalAlign="middle",l.element.appendChild(l.control),l.setValue(l.control.checked),l.control.addEventListener("change",function(e){l.emit("change",e),l.setValue(l.control.checked)},!1),l}return l(t,e),a(t,[{key:"setValue",value:function(e){this.value.textContent=e,this.control.checked=e}},{key:"getValue",value:function(){return this.control.checked}}]),t}(s),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.control=document.createElement("select"),r.map(function(e){var t=new Option(e,e);a.control.add(t)}),a.control.selectedIndex=l,a.control.style.width="130px",a.control.style.margin="auto",a.control.style.verticalAlign="middle",a.element.appendChild(a.control),a.setValue(a.control.value),a.control.addEventListener("change",function(e){a.emit("change",e),a.setValue(a.control.value)},!1),a}return l(t,e),a(t,[{key:"setSelectedIndex",value:function(e){this.control.selectedIndex=e}},{key:"getSelectedIndex",value:function(){return this.control.selectedIndex}}]),t}(s),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1;o(this,t);var u=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.control=document.createElement("input"),u.control.setAttribute("type","number"),u.control.setAttribute("min",l),u.control.setAttribute("max",a),u.control.setAttribute("step",i),u.control.value=r,u.control.style.margin="auto",u.control.style.verticalAlign="middle",u.element.appendChild(u.control),u.setValue(u.control.value),u.control.addEventListener("input",function(e){u.emit("input",e),u.setValue(u.control.value)},!1),u}return l(t,e),a(t,[{key:"setMin",value:function(e){this.control.setAttribute("min",e)}},{key:"setMax",value:function(e){this.control.setAttribute("max",e)}},{key:"setStep",value:function(e){this.control.setAttribute("step",e)}}]),t}(s),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000";o(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));l.container=document.createElement("div"),l.container.style.lineHeight="0",l.container.style.margin="2px auto",l.container.style.width="100px",l.label=document.createElement("div"),l.label.style.margin="0px",l.label.style.width="calc(100% - 2px)",l.label.style.height="24px",l.label.style.border="1px solid whitesmoke",l.label.style.boxShadow="0px 0px 0px 1px #222",l.control=document.createElement("canvas"),l.control.style.margin="0px",l.control.style.display="none",l.control.width=100,l.control.height=100,l.element.appendChild(l.container),l.container.appendChild(l.label),l.container.appendChild(l.control),l.ctx=l.control.getContext("2d");for(var a=l.ctx.createLinearGradient(0,0,l.control.width,0),i=["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],u=0,s=i.length;u<s;++u)a.addColorStop(u/(s-1),i[u]);l.ctx.fillStyle=a,l.ctx.fillRect(0,0,l.control.width,l.control.height),a=l.ctx.createLinearGradient(0,0,0,l.control.height),i=["rgba(255, 255, 255, 1.0)","rgba(255, 255, 255, 0.0)","rgba(0, 0, 0, 0.0)","rgba(0, 0, 0, 1.0)"];for(var c=0,h=i.length;c<h;++c)a.addColorStop(c/(h-1),i[c]);return l.ctx.fillStyle=a,l.ctx.fillRect(0,0,l.control.width,l.control.height),l.colorValue=r,l.tempColorValue=null,l.setValue(r),l.container.addEventListener("mouseover",function(){l.control.style.display="block",l.tempColorValue=l.colorValue}),l.container.addEventListener("mouseout",function(){l.control.style.display="none",null!=l.tempColorValue&&(l.setValue(l.tempColorValue),l.tempColorValue=null)}),l.control.addEventListener("mousemove",function(e){var t=l.ctx.getImageData(e.offsetX,e.offsetY,1,1),r=l.getColor8bitString(t.data);l.setValue(r)}),l.control.addEventListener("click",function(e){var t=l.ctx.getImageData(e.offsetX,e.offsetY,1,1);e.currentTarget.value=l.getColor8bitString(t.data),l.tempColorValue=null,l.control.style.display="none",l.emit("change",e)},!1),l}return l(t,e),a(t,[{key:"setValue",value:function(e){this.value.textContent=e,this.colorValue=e,this.container.style.backgroundColor=this.colorValue}},{key:"getValue",value:function(){return this.colorValue}},{key:"getFloatValue",value:function(){return this.getColorFloatArray(this.colorValue)}},{key:"getColor8bitString",value:function(e){return"#"+this.zeroPadding(e[0].toString(16),2)+this.zeroPadding(e[1].toString(16),2)+this.zeroPadding(e[2].toString(16),2)}},{key:"getColorFloatArray",value:function(e){if(null==e||"[object String]"!==Object.prototype.toString.call(e))return null;if(-1===e.search(/^#+[\d|a-f|A-F]+$/))return null;var t=e.replace("#","");if(3!==t.length&&6!==t.length)return null;var r=t.length/3;return[parseInt(e.substr(1,r),16)/255,parseInt(e.substr(1+r,r),16)/255,parseInt(e.substr(1+2*r,r),16)/255]}},{key:"zeroPadding",value:function(e,t){return(new Array(t).join("0")+e).slice(-t)}}]),t}(s)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(){n(this,e),this.Mat4=a,this.Vec3=i,this.Vec2=u,this.Qtn=s};t.default=o;var a=function(){function e(){n(this,e)}return l(e,null,[{key:"create",value:function(){return new Float32Array(16)}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"multiply",value:function(t,r,n){var l=n;null==n&&(l=e.create());var o=t[0],a=t[1],i=t[2],u=t[3],s=t[4],c=t[5],h=t[6],f=t[7],d=t[8],E=t[9],v=t[10],T=t[11],g=t[12],p=t[13],R=t[14],y=t[15],m=r[0],b=r[1],_=r[2],x=r[3],A=r[4],M=r[5],U=r[6],F=r[7],k=r[8],P=r[9],S=r[10],I=r[11],C=r[12],L=r[13],D=r[14],w=r[15];return l[0]=m*o+b*s+_*d+x*g,l[1]=m*a+b*c+_*E+x*p,l[2]=m*i+b*h+_*v+x*R,l[3]=m*u+b*f+_*T+x*y,l[4]=A*o+M*s+U*d+F*g,l[5]=A*a+M*c+U*E+F*p,l[6]=A*i+M*h+U*v+F*R,l[7]=A*u+M*f+U*T+F*y,l[8]=k*o+P*s+S*d+I*g,l[9]=k*a+P*c+S*E+I*p,l[10]=k*i+P*h+S*v+I*R,l[11]=k*u+P*f+S*T+I*y,l[12]=C*o+L*s+D*d+w*g,l[13]=C*a+L*c+D*E+w*p,l[14]=C*i+L*h+D*v+w*R,l[15]=C*u+L*f+D*T+w*y,l}},{key:"scale",value:function(t,r,n){var l=n;return null==n&&(l=e.create()),l[0]=t[0]*r[0],l[1]=t[1]*r[0],l[2]=t[2]*r[0],l[3]=t[3]*r[0],l[4]=t[4]*r[1],l[5]=t[5]*r[1],l[6]=t[6]*r[1],l[7]=t[7]*r[1],l[8]=t[8]*r[2],l[9]=t[9]*r[2],l[10]=t[10]*r[2],l[11]=t[11]*r[2],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l}},{key:"translate",value:function(t,r,n){var l=n;return null==n&&(l=e.create()),l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12],l[13]=t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13],l[14]=t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14],l[15]=t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15],l}},{key:"rotate",value:function(t,r,n,l){var o=l;null==l&&(o=e.create());var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(!a)return null;var i=n[0],u=n[1],s=n[2];1!=a&&(a=1/a,i*=a,u*=a,s*=a);var c=Math.sin(r),h=Math.cos(r),f=1-h,d=t[0],E=t[1],v=t[2],T=t[3],g=t[4],p=t[5],R=t[6],y=t[7],m=t[8],b=t[9],_=t[10],x=t[11],A=i*i*f+h,M=u*i*f+s*c,U=s*i*f-u*c,F=i*u*f-s*c,k=u*u*f+h,P=s*u*f+i*c,S=i*s*f+u*c,I=u*s*f-i*c,C=s*s*f+h;return r?t!=o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]):o=t,o[0]=d*A+g*M+m*U,o[1]=E*A+p*M+b*U,o[2]=v*A+R*M+_*U,o[3]=T*A+y*M+x*U,o[4]=d*F+g*k+m*P,o[5]=E*F+p*k+b*P,o[6]=v*F+R*k+_*P,o[7]=T*F+y*k+x*P,o[8]=d*S+g*I+m*C,o[9]=E*S+p*I+b*C,o[10]=v*S+R*I+_*C,o[11]=T*S+y*I+x*C,o}},{key:"lookAt",value:function(t,r,n,l){var o=t[0],a=t[1],i=t[2],u=r[0],s=r[1],c=r[2],h=n[0],f=n[1],d=n[2];if(o==u&&a==s&&i==c)return e.identity(l);var E=l;null==l&&(E=e.create());var v=void 0,T=void 0,g=void 0,p=void 0,R=void 0,y=void 0,m=void 0,b=void 0,_=void 0,x=void 0;return m=o-r[0],b=a-r[1],_=i-r[2],x=1/Math.sqrt(m*m+b*b+_*_),m*=x,b*=x,_*=x,v=f*_-d*b,T=d*m-h*_,g=h*b-f*m,x=Math.sqrt(v*v+T*T+g*g),x?(x=1/x,v*=x,T*=x,g*=x):(v=0,T=0,g=0),p=b*g-_*T,R=_*v-m*g,y=m*T-b*v,x=Math.sqrt(p*p+R*R+y*y),x?(x=1/x,p*=x,R*=x,y*=x):(p=0,R=0,y=0),E[0]=v,E[1]=p,E[2]=m,E[3]=0,E[4]=T,E[5]=R,E[6]=b,E[7]=0,E[8]=g,E[9]=y,E[10]=_,E[11]=0,E[12]=-(v*o+T*a+g*i),E[13]=-(p*o+R*a+y*i),E[14]=-(m*o+b*a+_*i),E[15]=1,E}},{key:"perspective",value:function(t,r,n,l,o){var a=o;null==o&&(a=e.create());var i=n*Math.tan(t*Math.PI/360),u=i*r,s=2*u,c=2*i,h=l-n;return a[0]=2*n/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*n/c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=-(l+n)/h,a[11]=-1,a[12]=0,a[13]=0,a[14]=-l*n*2/h,a[15]=0,a}},{key:"ortho",value:function(t,r,n,l,o,a,i){var u=i;null==i&&(u=e.create());var s=r-t,c=n-l,h=a-o;return u[0]=2/s,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/c,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-2/h,u[11]=0,u[12]=-(t+r)/s,u[13]=-(n+l)/c,u[14]=-(a+o)/h,u[15]=1,u}},{key:"transpose",value:function(t,r){var n=r;return null==r&&(n=e.create()),n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15],n}},{key:"inverse",value:function(t,r){var n=r;null==r&&(n=e.create());var l=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],f=t[8],d=t[9],E=t[10],v=t[11],T=t[12],g=t[13],p=t[14],R=t[15],y=l*s-o*u,m=l*c-a*u,b=l*h-i*u,_=o*c-a*s,x=o*h-i*s,A=a*h-i*c,M=f*g-d*T,U=f*p-E*T,F=f*R-v*T,k=d*p-E*g,P=d*R-v*g,S=E*R-v*p,I=1/(y*S-m*P+b*k+_*F-x*U+A*M);return n[0]=(s*S-c*P+h*k)*I,n[1]=(-o*S+a*P-i*k)*I,n[2]=(g*A-p*x+R*_)*I,n[3]=(-d*A+E*x-v*_)*I,n[4]=(-u*S+c*F-h*U)*I,n[5]=(l*S-a*F+i*U)*I,n[6]=(-T*A+p*b-R*m)*I,n[7]=(f*A-E*b+v*m)*I,n[8]=(u*P-s*F+h*M)*I,n[9]=(-l*P+o*F-i*M)*I,n[10]=(T*x-g*b+R*y)*I,n[11]=(-f*x+d*b-v*y)*I,n[12]=(-u*k+s*U-c*M)*I,n[13]=(l*k-o*U+a*M)*I,n[14]=(-T*_+g*m-p*y)*I,n[15]=(f*_-d*m+E*y)*I,n}},{key:"toVecIV",value:function(e,t){var r=e[0],n=e[1],l=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],h=e[9],f=e[10],d=e[11],E=e[12],v=e[13],T=e[14],g=e[15],p=t[0],R=t[1],y=t[2],m=t[3],b=[];return b[0]=p*r+R*a+y*c+m*E,b[1]=p*n+R*i+y*h+m*v,b[2]=p*l+R*u+y*f+m*T,b[3]=p*o+R*s+y*d+m*g,t=b,b}},{key:"vpFromCameraProperty",value:function(t,r,n,l,o,a,i,u,s,c){e.lookAt(t,r,n,u),e.perspective(l,o,a,i,s),e.multiply(s,u,c)}},{key:"screenPositionFromMvp",value:function(t,r,n,l){var o=.5*n,a=.5*l,i=e.toVecIV(t,[r[0],r[1],r[2],1]);return i[3]<=0?[NaN,NaN]:(i[0]/=i[3],i[1]/=i[3],i[2]/=i[3],[o+i[0]*o,a-i[1]*a])}}]),e}(),i=function(){function e(){n(this,e)}return l(e,null,[{key:"create",value:function(){return new Float32Array(3)}},{key:"length",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}},{key:"distance",value:function(t,r){var n=e.create();return n[0]=r[0]-t[0],n[1]=r[1]-t[1],n[2]=r[2]-t[2],n}},{key:"normalize",value:function(t){var r=e.create(),n=e.length(t);if(n>0){var l=1/n;r[0]=t[0]*l,r[1]=t[1]*l,r[2]=t[2]*l}else r[0]=0,r[1]=0,r[2]=0;return r}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{key:"cross",value:function(t,r){var n=e.create();return n[0]=t[1]*r[2]-t[2]*r[1],n[1]=t[2]*r[0]-t[0]*r[2],n[2]=t[0]*r[1]-t[1]*r[0],n}},{key:"faceNormal",value:function(t,r,n){var l=e.create(),o=[r[0]-t[0],r[1]-t[1],r[2]-t[2]],a=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return l[0]=o[1]*a[2]-o[2]*a[1],l[1]=o[2]*a[0]-o[0]*a[2],l[2]=o[0]*a[1]-o[1]*a[0],e.normalize(l)}}]),e}(),u=function(){function e(){n(this,e)}return l(e,null,[{key:"create",value:function(){return new Float32Array(2)}},{key:"length",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},{key:"distance",value:function(t,r){var n=e.create();return n[0]=r[0]-t[0],n[1]=r[1]-t[1],n}},{key:"normalize",value:function(t){var r=e.create(),n=e.length(t);if(n>0){var l=1/n;r[0]=t[0]*l,r[1]=t[1]*l}return r}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"cross",value:function(t,r){e.create();return t[0]*r[1]-t[1]*r[0]}}]),e}(),s=function(){function e(){n(this,e)}return l(e,null,[{key:"create",value:function(){return new Float32Array(4)}},{key:"identity",value:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}},{key:"inverse",value:function(t,r){var n=r;return null==r&&(n=e.create()),n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}},{key:"normalize",value:function(e){var t=e[0],r=e[1],n=e[2],l=Math.sqrt(t*t+r*r+n*n);return 0===l?(e[0]=0,e[1]=0,e[2]=0):(l=1/l,e[0]=t*l,e[1]=r*l,e[2]=n*l),e}},{key:"multiply",value:function(t,r,n){var l=n;null==n&&(l=e.create());var o=t[0],a=t[1],i=t[2],u=t[3],s=r[0],c=r[1],h=r[2],f=r[3];return l[0]=o*f+u*s+a*h-i*c,l[1]=a*f+u*c+i*s-o*h,l[2]=i*f+u*h+o*c-a*s,l[3]=u*f-o*s-a*c-i*h,l}},{key:"rotate",value:function(t,r,n){var l=n;null==n&&(l=e.create());var o=r[0],a=r[1],i=r[2],u=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(0!==u){var s=1/u;o*=s,a*=s,i*=s}var c=Math.sin(.5*t);return l[0]=o*c,l[1]=a*c,l[2]=i*c,l[3]=Math.cos(.5*t),l}},{key:"toVecIII",value:function(t,r,n){var l=n;null==n&&(l=[0,0,0]);var o=e.create(),a=e.create(),i=e.create();return e.inverse(r,i),o[0]=t[0],o[1]=t[1],o[2]=t[2],e.multiply(i,o,a),e.multiply(a,r,i),l[0]=i[0],l[1]=i[1],l[2]=i[2],l}},{key:"toMatIV",value:function(e,t){var r=t;null==t&&(r=a.create());var n=e[0],l=e[1],o=e[2],i=e[3],u=n+n,s=l+l,c=o+o,h=n*u,f=n*s,d=n*c,E=l*s,v=l*c,T=o*c,g=i*u,p=i*s,R=i*c;return r[0]=1-(E+T),r[1]=f-R,r[2]=d+p,r[3]=0,r[4]=f+R,r[5]=1-(h+T),r[6]=v-g,r[7]=0,r[8]=d-p,r[9]=v+g,r[10]=1-(h+E),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},{key:"slerp",value:function(t,r,n,l){var o=l;null==l&&(o=e.create());var a=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3],i=1-a*a;if(i<=0)o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3];else if(i=Math.sqrt(i),Math.abs(i)<1e-4)o[0]=.5*t[0]+.5*r[0],o[1]=.5*t[1]+.5*r[1],o[2]=.5*t[2]+.5*r[2],o[3]=.5*t[3]+.5*r[3];else{var u=Math.acos(a),s=u*n,c=Math.sin(u-s)/i,h=Math.sin(s)/i;o[0]=t[0]*c+r[0]*h,o[1]=t[1]*c+r[1]*h,o[2]=t[2]*c+r[2]*h,o[3]=t[3]*c+r[3]*h}return o}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return l(e,null,[{key:"plane",value:function(e,t,r){var n=void 0,l=void 0;return n=e/2,l=t/2,tc=r||[1,1,1,1],{position:[-n,l,0,n,l,0,-n,-l,0,n,-l,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],color:[r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3]],texCoord:[0,0,1,0,0,1,1,1],index:[0,1,2,2,1,3]}}},{key:"circle",value:function(e,t,r){var n=void 0,l=0,o=[],a=[],i=[],u=[],s=[];for(o.push(0,0,0),a.push(0,0,1),i.push(r[0],r[1],r[2],r[3]),u.push(.5,.5),n=0;n<e;n++){var c=2*Math.PI/e*n,h=Math.cos(c),f=Math.sin(c);o.push(h*t,f*t,0),a.push(0,0,1),i.push(r[0],r[1],r[2],r[3]),u.push(.5*(h+1),1-.5*(f+1)),n===e-1?s.push(0,l+1,1):s.push(0,l+1,l+2),++l}return{position:o,normal:a,color:i,texCoord:u,index:s}}},{key:"cube",value:function(e,t){for(var r=.5*e,n=[-r,-r,r,r,-r,r,r,r,r,-r,r,r,-r,-r,-r,-r,r,-r,r,r,-r,r,-r,-r,-r,r,-r,-r,r,r,r,r,r,r,r,-r,-r,-r,-r,r,-r,-r,r,-r,r,-r,-r,r,r,-r,-r,r,r,-r,r,r,r,r,-r,r,-r,-r,-r,-r,-r,r,-r,r,r,-r,r,-r],l=1/Math.sqrt(3),o=[-l,-l,l,l,-l,l,l,l,l,-l,l,l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l,-l,-l,l,-l,-l,l,l,l,l,l,l,l,-l,-l,-l,-l,l,-l,-l,l,-l,l,-l,-l,l,l,-l,-l,l,l,-l,l,l,l,l,-l,l,-l,-l,-l,-l,-l,l,-l,l,l,-l,l,-l],a=[],i=0;i<n.length/3;i++)a.push(t[0],t[1],t[2],t[3]);return{position:n,normal:o,color:a,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}},{key:"cone",value:function(e,t,r,n){var l=void 0,o=0,a=r/2,i=[],u=[],s=[],c=[],h=[];for(i.push(0,-a,0),u.push(0,-1,0),s.push(n[0],n[1],n[2],n[3]),c.push(.5,.5),l=0;l<=e;l++){var f=2*Math.PI/e*l,d=Math.cos(f),E=Math.sin(f);i.push(d*t,-a,E*t,d*t,-a,E*t),u.push(0,-1,0,d,0,E),s.push(n[0],n[1],n[2],n[3],n[0],n[1],n[2],n[3]),c.push(.5*(d+1),1-.5*(E+1),.5*(d+1),1-.5*(E+1)),l!==e&&(h.push(0,o+1,o+3),h.push(o+4,o+2,2*e+3)),o+=2}return i.push(0,a,0),u.push(0,1,0),s.push(n[0],n[1],n[2],n[3]),c.push(.5,.5),{position:i,normal:u,color:s,texCoord:c,index:h}}},{key:"cylinder",value:function(e,t,r,n,l){var o=void 0,a=2,i=n/2,u=[],s=[],c=[],h=[],f=[];for(u.push(0,i,0,0,-i,0),s.push(0,1,0,0,-1,0),c.push(l[0],l[1],l[2],l[3],l[0],l[1],l[2],l[3]),h.push(.5,.5,.5,.5),o=0;o<=e;o++){var d=2*Math.PI/e*o,E=Math.cos(d),v=Math.sin(d);u.push(E*t,i,v*t,E*t,i,v*t,E*r,-i,v*r,E*r,-i,v*r),s.push(0,1,0,E,0,v,0,-1,0,E,0,v),c.push(l[0],l[1],l[2],l[3],l[0],l[1],l[2],l[3],l[0],l[1],l[2],l[3],l[0],l[1],l[2],l[3]),h.push(.5*(E+1),1-.5*(v+1),1-o/e,0,.5*(E+1),1-.5*(v+1),1-o/e,1),o!==e&&f.push(0,a+4,a,1,a+2,a+6,a+5,a+7,a+1,a+1,a+7,a+3),a+=4}return{position:u,normal:s,color:c,texCoord:h,index:f}}},{key:"sphere",value:function(e,t,r,n){var l=void 0,o=void 0,a=[],i=[],u=[],s=[],c=[];for(l=0;l<=e;l++){var h=Math.PI/e*l,f=Math.cos(h),d=Math.sin(h);for(o=0;o<=t;o++){var E=2*Math.PI/t*o,v=d*r*Math.cos(E),T=f*r,g=d*r*Math.sin(E),p=d*Math.cos(E),R=d*Math.sin(E);a.push(v,T,g),i.push(p,f,R),u.push(n[0],n[1],n[2],n[3]),s.push(1-1/t*o,1/e*l)}}for(l=0;l<e;l++)for(o=0;o<t;o++){var y=(t+1)*l+o;c.push(y,y+1,y+t+2),c.push(y,y+t+2,y+t+1)}return{position:a,normal:i,color:u,texCoord:s,index:c}}},{key:"torus",value:function(e,t,r,n,l){var o=void 0,a=void 0,i=[],u=[],s=[],c=[],h=[];for(o=0;o<=e;o++){var f=2*Math.PI/e*o,d=Math.cos(f),E=Math.sin(f);for(a=0;a<=t;a++){var v=2*Math.PI/t*a,T=(d*r+n)*Math.cos(v),g=E*r,p=(d*r+n)*Math.sin(v),R=d*Math.cos(v),y=d*Math.sin(v),m=1/t*a,b=1/e*o+.5;b>1&&(b-=1),b=1-b,i.push(T,g,p),u.push(R,E,y),s.push(l[0],l[1],l[2],l[3]),c.push(m,b)}}for(o=0;o<e;o++)for(a=0;a<t;a++){var _=(t+1)*o+a;h.push(_,_+t+1,_+1),h.push(_+t+1,_+t+2,_+1)}return{position:i,normal:u,color:s,texCoord:c,index:h}}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return l(e,null,[{key:"hsva",value:function(e,t,r,n){if(!(t>1||r>1||n>1)){var l=e%360,o=Math.floor(l/60),a=l/60-o,i=r*(1-t),u=r*(1-t*a),s=r*(1-t*(1-a)),c=new Array;if(!t>0&&!t<0)c.push(r,r,r,n);else{var h=new Array(r,u,i,i,s,r),f=new Array(s,r,r,u,i,i),d=new Array(i,i,s,r,r,u);c.push(h[o],f[o],d[o],n)}return c}}},{key:"easeLiner",value:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},{key:"easeOutCubic",value:function(e){return(e=e/1-1)*e*e+1}},{key:"easeQuintic",value:function(e){var t=(e/=1)*e;return t*e*t}},{key:"degToRad",value:function(e){return e%360*Math.PI/180}},{key:"lonToMer",value:function(t){return e.EARTH_RADIUS*e.degToRad(t)}},{key:"latToMer",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r;isNaN(parseFloat(r))&&(n=0);t>=89.9999&&(t=89.9999),t<=1e-4-90&&(t=1e-4-90);var l=1-n,o=1-l*l,a=Math.sqrt(o),i=e.degToRad(t),u=Math.sin(i),s=a*u,c=.5*a;s=Math.pow((1-s)/(1+s),c);var h=Math.tan(.5*(.5*Math.PI-i))/s;return e.EARTH_RADIUS*Math.log(h)}},{key:"lonLatToMer",value:function(t,r){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{x:e.lonToMer(t),y:e.latToMer(r,flattening)}}},{key:"merToLonLat",value:function(t,r){var n=t/e.EARTH_HALF_CIRCUM*180,l=r/e.EARTH_HALF_CIRCUM*180;return l=180/Math.PI*(2*Math.atan(Math.exp(l*Math.PI/180))-Math.PI/2),{lon:n,lat:l}}},{key:"lonToTile",value:function(e,t){return Math.floor((e/180+1)*Math.pow(2,t)/2)}},{key:"latToTile",value:function(e,t){return Math.floor((-Math.log(Math.tan((45+e/2)*Math.PI/180))+Math.PI)*Math.pow(2,t)/(2*Math.PI))}},{key:"lonLatToTile",value:function(t,r,n){return{lon:e.lonToTile(t,n),lat:e.latToTile(r,n)}}},{key:"tileToLon",value:function(e,t){return e/Math.pow(2,t)*360-180}},{key:"tileToLat",value:function(e,t){var r=e/Math.pow(2,t)*2*Math.PI-Math.PI;return 2*Math.atan(Math.pow(Math.E,-r))*180/Math.PI-90}},{key:"tileToLonLat",value:function(t,r,n){return{lon:e.tileToLon(t,n),lat:e.tileToLat(r,n)}}},{key:"EARTH_RADIUS",get:function(){return 6378.137}},{key:"EARTH_CIRCUM",get:function(){return e.EARTH_RADIUS*Math.PI*2}},{key:"EARTH_HALF_CIRCUM",get:function(){return e.EARTH_RADIUS*Math.PI}},{key:"EARTH_MAX_LAT",get:function(){return 85.05112878}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),i=n(a),u=r(2),s=n(u),c=r(3),h=n(c),f=r(4),d=n(f),E=r(1),v=n(E),T=function(){function e(){l(this,e),this.VERSION="0.1.7",this.PI2=6.283185307179586,this.PI=3.141592653589793,this.PIH=1.5707963267948966,this.PIH2=.7853981633974483,this.TEXTURE_UNIT_COUNT=null,this.ready=!1,this.canvas=null,this.gl=null,this.textures=null,this.ext=null,this.Audio=i.default,this.Mesh=h.default,this.Util=d.default,this.Gui=new v.default,this.Math=new s.default,console.log("%câ—†%c glcubic.js %câ—†%c : version %c"+this.VERSION,"color: crimson","","color: crimson","","color: royalblue")}return o(e,[{key:"init",value:function(e,t){var r=t||{};return this.ready=!1,null!=e&&(e instanceof HTMLCanvasElement?this.canvas=e:"[object String]"===Object.prototype.toString.call(e)&&(this.canvas=document.getElementById(e)),null!=this.canvas&&(this.gl=this.canvas.getContext("webgl",r)||this.canvas.getContext("experimental-webgl",r),null!=this.gl&&(this.ready=!0,this.TEXTURE_UNIT_COUNT=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.textures=new Array(this.TEXTURE_UNIT_COUNT)),this.ext={elementIndexUint:this.gl.getExtension("OES_element_index_uint"),textureFloat:this.gl.getExtension("OES_texture_float"),textureHalfFloat:this.gl.getExtension("OES_texture_half_float"),drawBuffers:this.gl.getExtension("WEBGL_draw_buffers")},this.ready))}},{key:"sceneClear",value:function(e,t,r){var n=this.gl,l=n.COLOR_BUFFER_BIT;n.clearColor(e[0],e[1],e[2],e[3]),null!=t&&(n.clearDepth(t),l|=n.DEPTH_BUFFER_BIT),null!=r&&(n.clearStencil(r),l|=n.STENCIL_BUFFER_BIT),n.clear(l)}},{key:"sceneView",value:function(e,t,r,n){var l=e||0,o=t||0,a=r||window.innerWidth,i=n||window.innerHeight;this.gl.viewport(l,o,a,i)}},{key:"drawArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawArrays(e,r,t)}},{key:"drawElements",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawElements(e,t,this.gl.UNSIGNED_SHORT,r)}},{key:"drawElementsInt",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawElements(e,t,this.gl.UNSIGNED_INT,r)}},{key:"createVbo",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),t}}},{key:"createIbo",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Int16Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),t}}},{key:"createIboInt",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),t}}},{key:"createTextureFromFile",value:function(e,t,r){var n=this;if(null!=e&&null!=t){var l=new Image,o=this.gl;l.onload=function(){n.textures[t]={texture:null,type:null,loaded:!1};var a=o.createTexture();o.activeTexture(o.TEXTURE0+t),o.bindTexture(o.TEXTURE_2D,a),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l),o.generateMipmap(o.TEXTURE_2D),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),n.textures[t].texture=a,n.textures[t].type=o.TEXTURE_2D,n.textures[t].loaded=!0,console.log("%câ—†%c texture number: %c"+t+"%c, file loaded: %c"+e,"color: crimson","","color: blue","","color: goldenrod"),o.bindTexture(o.TEXTURE_2D,null),null!=r&&r(t)},l.src=e}}},{key:"createTextureFromObject",value:function(e,t){if(null!=e&&null!=t){var r=this.gl,n=r.createTexture();this.textures[t]={texture:null,type:null,loaded:!1},r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.textures[t].texture=n,this.textures[t].type=r.TEXTURE_2D,this.textures[t].loaded=!0,console.log("%câ—†%c texture number: %c"+t+"%c, object attached","color: crimson","","color: blue",""),r.bindTexture(r.TEXTURE_2D,null)}}},{key:"createTextureCubeFromFile",value:function(e,t,r,n){var l=this;if(null!=e&&null!=t&&null!=r){var o=[],a=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};for(var i=0;i<e.length;i++)o[i]={image:new Image,loaded:!1},o[i].image.onload=function(i){return function(){if(o[i].loaded=!0,6===o.length){var u=!0;if(o.map(function(e){u=u&&e.loaded}),!0===u){var s=a.createTexture();a.activeTexture(a.TEXTURE0+r),a.bindTexture(a.TEXTURE_CUBE_MAP,s);for(var c=0;c<e.length;c++)a.texImage2D(t[c],0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o[c].image);a.generateMipmap(a.TEXTURE_CUBE_MAP),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),l.textures[r].texture=s,l.textures[r].type=a.TEXTURE_CUBE_MAP,l.textures[r].loaded=!0,console.log("%câ—†%c texture number: %c"+r+"%c, file loaded: %c"+e[0]+"...","color: crimson","","color: blue","","color: goldenrod"),a.bindTexture(a.TEXTURE_CUBE_MAP,null),null!=n&&n(r)}}}}(i),o[i].image.src=e[i]}}},{key:"bindTexture",value:function(e,t){null!=this.textures[t]&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.textures[t].type,this.textures[t].texture))}},{key:"isTextureLoaded",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0;for(r=!0,n=!1,e=0,t=this.textures.length;e<t;e++)null!=this.textures[e]&&(n=!0,r=r&&this.textures[e].loaded);return!!n&&r}},{key:"createFramebuffer",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){var n=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};var l=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,l);var o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,o);var a=n.createTexture();return n.activeTexture(n.TEXTURE0+r),n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=a,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%câ—†%c texture number: %c"+r+"%c, framebuffer created","color: crimson","","color: blue",""),{framebuffer:l,depthRenderbuffer:o,texture:a}}}},{key:"createFramebufferStencil",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){var n=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};var l=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,l);var o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o);var a=n.createTexture();return n.activeTexture(n.TEXTURE0+r),n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=a,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%câ—†%c texture number: %c"+r+"%c, framebuffer created (enable stencil)","color: crimson","","color: blue",""),{framebuffer:l,depthStencilRenderbuffer:o,texture:a}}}},{key:"createFramebufferFloat",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){if(null==this.ext||null==this.ext.textureFloat&&null==this.ext.textureHalfFloat)return void console.log("float texture not support");var n=this.gl,l=null!=this.ext.textureFloat?n.FLOAT:this.ext.textureHalfFloat.HALF_FLOAT_OES;this.textures[r]={texture:null,type:null,loaded:!1};var o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o);var a=n.createTexture();return n.activeTexture(n.TEXTURE0+r),n.bindTexture(n.TEXTURE_2D,a),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,l,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0),n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=a,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%câ—†%c texture number: %c"+r+"%c, framebuffer created (enable float)","color: crimson","","color: blue",""),{framebuffer:o,depthRenderbuffer:null,texture:a}}}},{key:"createFramebufferCube",value:function(e,t,r,n){if(null!=e&&null!=t&&null!=r&&null!=n){var l=this.gl;this.textures[n]={texture:null,type:null,loaded:!1};var o=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,o);var a=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,a),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,e,t),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,a);var i=l.createTexture();l.activeTexture(l.TEXTURE0+n),l.bindTexture(l.TEXTURE_CUBE_MAP,i);for(var u=0;u<r.length;u++)l.texImage2D(r[u],0,l.RGBA,e,t,0,l.RGBA,l.UNSIGNED_BYTE,null);return l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.bindTexture(l.TEXTURE_CUBE_MAP,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),this.textures[n].texture=i,this.textures[n].type=l.TEXTURE_CUBE_MAP,this.textures[n].loaded=!0,console.log("%câ—†%c texture number: %c"+n+"%c, framebuffer cube created","color: crimson","","color: blue",""),{framebuffer:o,depthRenderbuffer:a,texture:i}}}},{key:"createProgramFromId",value:function(e,t,r,n,l,o){if(null==this.gl)return null;var a=void 0,i=new g(this.gl);for(i.vs=i.createShaderFromId(e),i.fs=i.createShaderFromId(t),i.prg=i.createProgram(i.vs,i.fs),i.attL=new Array(r.length),i.attS=new Array(r.length),a=0;a<r.length;a++)i.attL[a]=this.gl.getAttribLocation(i.prg,r[a]),i.attS[a]=n[a];for(i.uniL=new Array(l.length),a=0;a<l.length;a++)i.uniL[a]=this.gl.getUniformLocation(i.prg,l[a]);return i.uniT=o,i.locationCheck(r,l),i}},{key:"createProgramFromSource",value:function(e,t,r,n,l,o){if(null==this.gl)return null;var a=void 0,i=new g(this.gl);for(i.vs=i.createShaderFromSource(e,this.gl.VERTEX_SHADER),i.fs=i.createShaderFromSource(t,this.gl.FRAGMENT_SHADER),i.prg=i.createProgram(i.vs,i.fs),i.attL=new Array(r.length),i.attS=new Array(r.length),a=0;a<r.length;a++)i.attL[a]=this.gl.getAttribLocation(i.prg,r[a]),i.attS[a]=n[a];for(i.uniL=new Array(l.length),a=0;a<l.length;a++)i.uniL[a]=this.gl.getUniformLocation(i.prg,l[a]);return i.uniT=o,i.locationCheck(r,l),i}},{key:"createProgramFromFile",value:function(e,t,r,n,l,o,a){function i(e,t){var r=new XMLHttpRequest;r.open("GET",t.targetUrl,!0),r.setRequestHeader("Pragma","no-cache"),r.setRequestHeader("Cache-Control","no-cache"),r.onload=function(){console.log("%câ—†%c shader file loaded: %c"+t.targetUrl,"color: crimson","","color: goldenrod"),t.source=r.responseText,u(e)},r.send()}function u(e){if(null!=c.vs.source&&null!=c.fs.source){var t=void 0;for(s.vs=s.createShaderFromSource(c.vs.source,e.VERTEX_SHADER),s.fs=s.createShaderFromSource(c.fs.source,e.FRAGMENT_SHADER),s.prg=s.createProgram(s.vs,s.fs),s.attL=new Array(r.length),s.attS=new Array(r.length),t=0;t<r.length;t++)s.attL[t]=e.getAttribLocation(s.prg,r[t]),s.attS[t]=n[t];for(s.uniL=new Array(l.length),t=0;t<l.length;t++)s.uniL[t]=e.getUniformLocation(s.prg,l[t]);s.uniT=o,s.locationCheck(r,l),a(s)}}if(null==this.gl)return null;var s=new g(this.gl),c={vs:{targetUrl:e,source:null},fs:{targetUrl:t,source:null}};return i(this.gl,c.vs),i(this.gl,c.fs),s}},{key:"deleteBuffer",value:function(e){!0===this.gl.isBuffer(e)&&(this.gl.deleteBuffer(e),e=null)}},{key:"deleteTexture",value:function(e){!0===this.gl.isTexture(e)&&(this.gl.deleteTexture(e),e=null)}},{key:"deleteFramebuffer",value:function(e){if(null!=e){for(var t in e)e[t]instanceof WebGLFramebuffer&&!0===this.gl.isFramebuffer(e[t])?(this.gl.deleteFramebuffer(e[t]),e[t]=null):e[t]instanceof WebGLRenderbuffer&&!0===this.gl.isRenderbuffer(e[t])?(this.gl.deleteRenderbuffer(e[t]),e[t]=null):e[t]instanceof WebGLTexture&&!0===this.gl.isTexture(e[t])&&(this.gl.deleteTexture(e[t]),e[t]=null);e=null}}},{key:"deleteShader",value:function(e){!0===this.gl.isShader(e)&&(this.gl.deleteShader(e),e=null)}},{key:"deleteProgram",value:function(e){!0===this.gl.isProgram(e)&&(this.gl.deleteProgram(e),e=null)}},{key:"deleteProgramManager",value:function(e){null!=e&&e instanceof g&&(this.deleteShader(e.vs),this.deleteShader(e.fs),this.deleteProgram(e.prg),e.attL=null,e.attS=null,e.uniL=null,e.uniT=null,e=null)}}]),e}();t.default=T;var g=function(){function e(t){l(this,e),this.gl=t,this.vs=null,this.fs=null,this.prg=null,this.attL=null,this.attS=null,this.uniL=null,this.uniT=null}return o(e,[{key:"createShaderFromId",value:function(e){var t=void 0,r=document.getElementById(e);if(r){switch(r.type){case"x-shader/x-vertex":t=this.gl.createShader(this.gl.VERTEX_SHADER);break;case"x-shader/x-fragment":t=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}if(this.gl.shaderSource(t,r.text),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))return t;console.warn("â—† compile failed of shader: "+this.gl.getShaderInfoLog(t))}}},{key:"createShaderFromSource",value:function(e,t){var r=void 0;switch(t){case this.gl.VERTEX_SHADER:r=this.gl.createShader(this.gl.VERTEX_SHADER);break;case this.gl.FRAGMENT_SHADER:r=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}if(this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))return r;console.warn("â—† compile failed of shader: "+this.gl.getShaderInfoLog(r))}},{key:"createProgram",value:function(e,t){var r=this.gl.createProgram();if(this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS))return this.gl.useProgram(r),r;console.warn("â—† link program failed: "+this.gl.getProgramInfoLog(r))}},{key:"useProgram",value:function(){this.gl.useProgram(this.prg)}},{key:"setAttribute",value:function(e,t){var r=this.gl;for(var n in e)this.attL[n]>=0&&(r.bindBuffer(r.ARRAY_BUFFER,e[n]),r.enableVertexAttribArray(this.attL[n]),r.vertexAttribPointer(this.attL[n],this.attS[n],r.FLOAT,!1,0,0));null!=t&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t)}},{key:"pushShader",value:function(e){for(var t=this.gl,r=0,n=this.uniT.length;r<n;r++){var l="uniform"+this.uniT[r].replace(/matrix/i,"Matrix");null!=t[l]?-1!==l.search(/Matrix/)?t[l](this.uniL[r],!1,e[r]):t[l](this.uniL[r],e[r]):console.warn("â—† not support uniform type: "+this.uniT[r])}}},{key:"locationCheck",value:function(e,t){var r=void 0,n=void 0;for(r=0,n=e.length;r<n;r++)(null==this.attL[r]||this.attL[r]<0)&&console.warn('â—† invalid attribute location: %c"'+e[r]+'"',"color: crimson");for(r=0,n=t.length;r<n;r++)(null==this.uniL[r]||this.uniL[r]<0)&&console.warn('â—† invalid uniform location: %c"'+t[r]+'"',"color: crimson")}}]),e}();window.gl3=window.gl3||new T}]);