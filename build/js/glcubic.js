!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=5)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){function e(t,r){if(n(this,e),this.ctx=null,this.comp=null,this.bgmGain=null,this.soundGain=null,this.src=null,"undefined"==typeof AudioContext&&"undefined"==typeof webkitAudioContext)throw new Error("not found AudioContext");"undefined"!=typeof AudioContext?this.ctx=new AudioContext:this.ctx=new webkitAudioContext,this.comp=this.ctx.createDynamicsCompressor(),this.comp.connect(this.ctx.destination),this.bgmGain=this.ctx.createGain(),this.bgmGain.connect(this.comp),this.bgmGain.gain.value=t,this.soundGain=this.ctx.createGain(),this.soundGain.connect(this.comp),this.soundGain.gain.value=r,this.src=[]}return i(e,[{key:"load",value:function(e,t,r,n,i){var l=this.ctx,u=n?this.bgmGain:this.soundGain,a=this.src;a[t]=null;var s=new XMLHttpRequest;s.open("GET",e,!0),s.setRequestHeader("Pragma","no-cache"),s.setRequestHeader("Cache-Control","no-cache"),s.responseType="arraybuffer",s.onload=function(){l.decodeAudioData(s.response,function(s){a[t]=new o(l,u,s,r,n),a[t].loaded=!0,console.log("%c◆%c audio number: %c"+t+"%c, audio loaded: %c"+e,"color: crimson","","color: blue","","color: goldenrod"),i()},function(e){console.log(e)})},s.send()}},{key:"loadComplete",value:function(){var e=void 0,t=void 0;for(t=!0,e=0;e<this.src.length;e++)t=t&&null!=this.src[e]&&this.src[e].loaded;return t}}]),e}();t.default=l;var o=function(){function e(t,r,i,l,o){n(this,e),this.ctx=t,this.gain=r,this.audioBuffer=i,this.bufferSource=[],this.activeBufferSource=0,this.loop=l,this.loaded=!1,this.fftLoop=16,this.update=!1,this.background=o,this.node=this.ctx.createScriptProcessor(2048,1,1),this.analyser=this.ctx.createAnalyser(),this.analyser.smoothingTimeConstant=.8,this.analyser.fftSize=2*this.fftLoop,this.onData=new Uint8Array(this.analyser.frequencyBinCount)}return i(e,[{key:"play",value:function(){function e(e){l.update&&(l.update=!1,l.analyser.getByteFrequencyData(l.onData))}var t=this,r=void 0,n=void 0,i=void 0,l=this;if(r=this.bufferSource.length,i=-1,r>0){for(n=0;n<r;n++)if(!this.bufferSource[n].playnow){this.bufferSource[n]=null,this.bufferSource[n]=this.ctx.createBufferSource(),i=n;break}i<0&&(this.bufferSource[this.bufferSource.length]=this.ctx.createBufferSource(),i=this.bufferSource.length-1)}else this.bufferSource[0]=this.ctx.createBufferSource(),i=0;this.activeBufferSource=i,this.bufferSource[i].buffer=this.audioBuffer,this.bufferSource[i].loop=this.loop,this.bufferSource[i].playbackRate.value=1,this.loop||(this.bufferSource[i].onended=function(){t.stop(0),t.playnow=!1}),this.background&&(this.bufferSource[i].connect(this.analyser),this.analyser.connect(this.node),this.node.connect(this.ctx.destination),this.node.onaudioprocess=function(t){e(t)}),this.bufferSource[i].connect(this.gain),this.bufferSource[i].start(0),this.bufferSource[i].playnow=!0}},{key:"stop",value:function(){this.bufferSource[this.activeBufferSource].stop(0),this.playnow=!1}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(){l(this,e),this.Wrapper=a,this.Element=s,this.Slider=c,this.Checkbox=f,this.Select=h,this.Spin=E,this.Color=d};t.default=u;var a=function(){function e(){l(this,e),this.element=document.createElement("div"),this.element.style.backgroundColor="rgba(64, 64, 64, 0.5)",this.element.style.position="absolute",this.element.style.top="0px",this.element.style.right="0px",this.element.style.height="100%"}return o(e,[{key:"getElement",value:function(){return this.element}}]),e}(),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";l(this,e),this.element=document.createElement("div"),this.element.style.fontSize="small",this.element.style.textAlign="center",this.element.style.width="270px",this.element.style.height="30px",this.element.style.lineHeight="30px",this.element.style.display="flex",this.element.style.flexDirection="row",this.element.style.justifyContent="flex-start",this.text=t,this.label=document.createElement("span"),this.label.textContent=this.text,this.label.style.color="#222",this.label.style.textShadow="0px 0px 5px white",this.label.style.display="inline-block",this.label.style.margin="auto 5px",this.label.style.width="50px",this.label.style.overflow="hidden",this.element.appendChild(this.label),this.value=document.createElement("span"),this.value.style.backgroundColor="rgba(0, 0, 0, 0.25)",this.value.style.color="whitesmoke",this.value.style.fontSize="x-small",this.value.style.textShadow="0px 0px 5px black",this.value.style.display="inline-block",this.value.style.margin="auto 5px",this.value.style.width="50px",this.value.style.overflow="hidden",this.element.appendChild(this.value),this.control=null,this.listeners={}}return o(e,[{key:"add",value:function(e,t){null!=this.control&&null!=e&&null!=t&&"[object String]"===Object.prototype.toString.call(e)&&"[object Function]"===Object.prototype.toString.call(t)&&(this.listeners[e]=t)}},{key:"emit",value:function(e,t){null!=this.control&&this.listeners.hasOwnProperty(e)&&this.listeners[e](t,this)}},{key:"remove",value:function(){null!=this.control&&this.listeners.hasOwnProperty(type)&&(this.listeners[type]=null,delete this.listeners[type])}},{key:"setValue",value:function(e){this.value.textContent=e,this.control.value=e}},{key:"getValue",value:function(){return this.control.value}},{key:"getControl",value:function(){return this.control}},{key:"getText",value:function(){return this.text}},{key:"getElement",value:function(){return this.element}}]),e}(),c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.control=document.createElement("input"),a.control.setAttribute("type","range"),a.control.setAttribute("min",i),a.control.setAttribute("max",o),a.control.setAttribute("step",u),a.control.value=r,a.control.style.margin="auto",a.control.style.verticalAlign="middle",a.element.appendChild(a.control),a.setValue(a.control.value),a.control.addEventListener("input",function(e){a.emit("input",e),a.setValue(a.control.value)},!1),a}return i(t,e),o(t,[{key:"setMin",value:function(e){this.control.setAttribute("min",e)}},{key:"setMax",value:function(e){this.control.setAttribute("max",e)}},{key:"setStep",value:function(e){this.control.setAttribute("step",e)}}]),t}(s),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.control=document.createElement("input"),i.control.setAttribute("type","checkbox"),i.control.checked=r,i.control.style.margin="auto",i.control.style.verticalAlign="middle",i.element.appendChild(i.control),i.setValue(i.control.checked),i.control.addEventListener("change",function(e){i.emit("change",e),i.setValue(i.control.checked)},!1),i}return i(t,e),o(t,[{key:"setValue",value:function(e){this.value.textContent=e,this.control.checked=e}},{key:"getValue",value:function(){return this.control.checked}}]),t}(s),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.control=document.createElement("select"),r.map(function(e){var t=new Option(e,e);o.control.add(t)}),o.control.selectedIndex=i,o.control.style.width="130px",o.control.style.margin="auto",o.control.style.verticalAlign="middle",o.element.appendChild(o.control),o.setValue(o.control.value),o.control.addEventListener("change",function(e){o.emit("change",e),o.setValue(o.control.value)},!1),o}return i(t,e),o(t,[{key:"setSelectedIndex",value:function(e){this.control.selectedIndex=e}},{key:"getSelectedIndex",value:function(){return this.control.selectedIndex}}]),t}(s),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1;l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.control=document.createElement("input"),a.control.setAttribute("type","number"),a.control.setAttribute("min",i),a.control.setAttribute("max",o),a.control.setAttribute("step",u),a.control.value=r,a.control.style.margin="auto",a.control.style.verticalAlign="middle",a.element.appendChild(a.control),a.setValue(a.control.value),a.control.addEventListener("input",function(e){a.emit("input",e),a.setValue(a.control.value)},!1),a}return i(t,e),o(t,[{key:"setMin",value:function(e){this.control.setAttribute("min",e)}},{key:"setMax",value:function(e){this.control.setAttribute("max",e)}},{key:"setStep",value:function(e){this.control.setAttribute("step",e)}}]),t}(s),d=function(e){function t(){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(s)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(){n(this,e),this.Mat4=o,this.Vec3=u,this.Vec2=a,this.Qtn=s};t.default=l;var o=function(){function e(){n(this,e)}return i(e,null,[{key:"create",value:function(){return new Float32Array(16)}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"multiply",value:function(e,t,r){var n=e[0],i=e[1],l=e[2],o=e[3],u=e[4],a=e[5],s=e[6],c=e[7],f=e[8],h=e[9],E=e[10],d=e[11],v=e[12],T=e[13],g=e[14],R=e[15],y=t[0],m=t[1],_=t[2],b=t[3],p=t[4],x=t[5],A=t[6],U=t[7],F=t[8],M=t[9],P=t[10],k=t[11],S=t[12],D=t[13],w=t[14],I=t[15];return r[0]=y*n+m*u+_*f+b*v,r[1]=y*i+m*a+_*h+b*T,r[2]=y*l+m*s+_*E+b*g,r[3]=y*o+m*c+_*d+b*R,r[4]=p*n+x*u+A*f+U*v,r[5]=p*i+x*a+A*h+U*T,r[6]=p*l+x*s+A*E+U*g,r[7]=p*o+x*c+A*d+U*R,r[8]=F*n+M*u+P*f+k*v,r[9]=F*i+M*a+P*h+k*T,r[10]=F*l+M*s+P*E+k*g,r[11]=F*o+M*c+P*d+k*R,r[12]=S*n+D*u+w*f+I*v,r[13]=S*i+D*a+w*h+I*T,r[14]=S*l+D*s+w*E+I*g,r[15]=S*o+D*c+w*d+I*R,r}},{key:"scale",value:function(e,t,r){return r[0]=e[0]*t[0],r[1]=e[1]*t[0],r[2]=e[2]*t[0],r[3]=e[3]*t[0],r[4]=e[4]*t[1],r[5]=e[5]*t[1],r[6]=e[6]*t[1],r[7]=e[7]*t[1],r[8]=e[8]*t[2],r[9]=e[9]*t[2],r[10]=e[10]*t[2],r[11]=e[11]*t[2],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{key:"translate",value:function(e,t,r){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12],r[13]=e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13],r[14]=e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14],r[15]=e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15],r}},{key:"rotate",value:function(e,t,r,n){var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!i)return null;var l=r[0],o=r[1],u=r[2];1!=i&&(i=1/i,l*=i,o*=i,u*=i);var a=Math.sin(t),s=Math.cos(t),c=1-s,f=e[0],h=e[1],E=e[2],d=e[3],v=e[4],T=e[5],g=e[6],R=e[7],y=e[8],m=e[9],_=e[10],b=e[11],p=l*l*c+s,x=o*l*c+u*a,A=u*l*c-o*a,U=l*o*c-u*a,F=o*o*c+s,M=u*o*c+l*a,P=l*u*c+o*a,k=o*u*c-l*a,S=u*u*c+s;return t?e!=n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]):n=e,n[0]=f*p+v*x+y*A,n[1]=h*p+T*x+m*A,n[2]=E*p+g*x+_*A,n[3]=d*p+R*x+b*A,n[4]=f*U+v*F+y*M,n[5]=h*U+T*F+m*M,n[6]=E*U+g*F+_*M,n[7]=d*U+R*F+b*M,n[8]=f*P+v*k+y*S,n[9]=h*P+T*k+m*S,n[10]=E*P+g*k+_*S,n[11]=d*P+R*k+b*S,n}},{key:"lookAt",value:function(t,r,n,i){var l=t[0],o=t[1],u=t[2],a=n[0],s=n[1],c=n[2],f=r[0],h=r[1],E=r[2];if(l==f&&o==h&&u==E)return e.identity(i);var d=void 0,v=void 0,T=void 0,g=void 0,R=void 0,y=void 0,m=void 0,_=void 0,b=void 0,p=void 0;return m=l-r[0],_=o-r[1],b=u-r[2],p=1/Math.sqrt(m*m+_*_+b*b),m*=p,_*=p,b*=p,d=s*b-c*_,v=c*m-a*b,T=a*_-s*m,p=Math.sqrt(d*d+v*v+T*T),p?(p=1/p,d*=p,v*=p,T*=p):(d=0,v=0,T=0),g=_*T-b*v,R=b*d-m*T,y=m*v-_*d,p=Math.sqrt(g*g+R*R+y*y),p?(p=1/p,g*=p,R*=p,y*=p):(g=0,R=0,y=0),i[0]=d,i[1]=g,i[2]=m,i[3]=0,i[4]=v,i[5]=R,i[6]=_,i[7]=0,i[8]=T,i[9]=y,i[10]=b,i[11]=0,i[12]=-(d*l+v*o+T*u),i[13]=-(g*l+R*o+y*u),i[14]=-(m*l+_*o+b*u),i[15]=1,i}},{key:"perspective",value:function(e,t,r,n,i){var l=r*Math.tan(e*Math.PI/360),o=l*t,u=2*o,a=2*l,s=n-r;return i[0]=2*r/u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*r/a,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-(n+r)/s,i[11]=-1,i[12]=0,i[13]=0,i[14]=-n*r*2/s,i[15]=0,i}},{key:"ortho",value:function(e,t,r,n,i,l,o){var u=t-e,a=r-n,s=l-i;return o[0]=2/u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/s,o[11]=0,o[12]=-(e+t)/u,o[13]=-(r+n)/a,o[14]=-(l+i)/s,o[15]=1,o}},{key:"transpose",value:function(e,t){return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t}},{key:"inverse",value:function(e,t){var r=e[0],n=e[1],i=e[2],l=e[3],o=e[4],u=e[5],a=e[6],s=e[7],c=e[8],f=e[9],h=e[10],E=e[11],d=e[12],v=e[13],T=e[14],g=e[15],R=r*u-n*o,y=r*a-i*o,m=r*s-l*o,_=n*a-i*u,b=n*s-l*u,p=i*s-l*a,x=c*v-f*d,A=c*T-h*d,U=c*g-E*d,F=f*T-h*v,M=f*g-E*v,P=h*g-E*T,k=1/(R*P-y*M+m*F+_*U-b*A+p*x);return t[0]=(u*P-a*M+s*F)*k,t[1]=(-n*P+i*M-l*F)*k,t[2]=(v*p-T*b+g*_)*k,t[3]=(-f*p+h*b-E*_)*k,t[4]=(-o*P+a*U-s*A)*k,t[5]=(r*P-i*U+l*A)*k,t[6]=(-d*p+T*m-g*y)*k,t[7]=(c*p-h*m+E*y)*k,t[8]=(o*M-u*U+s*x)*k,t[9]=(-r*M+n*U-l*x)*k,t[10]=(d*b-v*m+g*R)*k,t[11]=(-c*b+f*m-E*R)*k,t[12]=(-o*F+u*A-a*x)*k,t[13]=(r*F-n*A+i*x)*k,t[14]=(-d*_+v*y-T*R)*k,t[15]=(c*_-f*y+h*R)*k,t}},{key:"toVecIV",value:function(e,t){var r=e[0],n=e[1],i=e[2],l=e[3],o=e[4],u=e[5],a=e[6],s=e[7],c=e[8],f=e[9],h=e[10],E=e[11],d=e[12],v=e[13],T=e[14],g=e[15],R=t[0],y=t[1],m=t[2],_=t[3],b=[];return b[0]=R*r+y*o+m*c+_*d,b[1]=R*n+y*u+m*f+_*v,b[2]=R*i+y*a+m*h+_*T,b[3]=R*l+y*s+m*E+_*g,b}},{key:"vpFromCameraProperty",value:function(t,r,n,i,l,o,u,a,s,c){e.lookAt(t,r,n,a),e.perspective(i,l,o,u,s),e.multiply(s,a,c)}},{key:"screenPositionFromMvp",value:function(t,r,n,i){var l=.5*n,o=.5*i,u=e.toVecIV(t,[r[0],r[1],r[2],1]);return u[3]<=0?[NaN,NaN]:(u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],[l+u[0]*l,o-u[1]*o])}}]),e}(),u=function(){function e(){n(this,e)}return i(e,null,[{key:"create",value:function(){return new Float32Array(3)}},{key:"length",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}},{key:"distance",value:function(t,r){var n=e.create();return n[0]=r[0]-t[0],n[1]=r[1]-t[1],n[2]=r[2]-t[2],n}},{key:"normalize",value:function(t){var r=e.create(),n=e.length(t);if(n>0){var i=1/n;r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i}return r}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{key:"cross",value:function(t,r){var n=e.create();return n[0]=t[1]*r[2]-t[2]*r[1],n[1]=t[2]*r[0]-t[0]*r[2],n[2]=t[0]*r[1]-t[1]*r[0],n}},{key:"faceNormal",value:function(t,r,n){var i=e.create(),l=[r[0]-t[0],r[1]-t[1],r[2]-t[2]],o=[n[0]-t[0],n[1]-t[1],n[2]-t[2]];return i[0]=l[1]*o[2]-l[2]*o[1],i[1]=l[2]*o[0]-l[0]*o[2],i[2]=l[0]*o[1]-l[1]*o[0],e.normalize(i)}}]),e}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"create",value:function(){return new Float32Array(2)}},{key:"length",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},{key:"distance",value:function(t,r){var n=e.create();return n[0]=r[0]-t[0],n[1]=r[1]-t[1],n}},{key:"normalize",value:function(t){var r=e.create(),n=e.length(t);if(n>0){var i=1/n;r[0]=t[0]*i,r[1]=t[1]*i}return r}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"cross",value:function(t,r){e.create();return t[0]*r[1]-t[1]*r[0]}}]),e}(),s=function(){function e(){n(this,e)}return i(e,null,[{key:"create",value:function(){return new Float32Array(4)}},{key:"identity",value:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}},{key:"inverse",value:function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}},{key:"normalize",value:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],l=Math.sqrt(t*t+r*r+n*n+i*i);return 0===l?(e[0]=0,e[1]=0,e[2]=0,e[3]=0):(l=1/l,e[0]=t*l,e[1]=r*l,e[2]=n*l,e[3]=i*l),e}},{key:"multiply",value:function(e,t,r){var n=e[0],i=e[1],l=e[2],o=e[3],u=t[0],a=t[1],s=t[2],c=t[3];return r[0]=n*c+o*u+i*s-l*a,r[1]=i*c+o*a+l*u-n*s,r[2]=l*c+o*s+n*a-i*u,r[3]=o*c-n*u-i*a-l*s,r}},{key:"rotate",value:function(e,t,r){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);if(!n)return null;var i=t[0],l=t[1],o=t[2];1!=n&&(n=1/n,i*=n,l*=n,o*=n);var u=Math.sin(.5*e);return r[0]=i*u,r[1]=l*u,r[2]=o*u,r[3]=Math.cos(.5*e),r}},{key:"toVecIII",value:function(t,r,n){var i=e.create(),l=e.create(),o=e.create();return e.inverse(r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],e.multiply(o,i,l),e.multiply(l,r,o),n[0]=o[0],n[1]=o[1],n[2]=o[2],n}},{key:"toMatIV",value:function(e,t){var r=e[0],n=e[1],i=e[2],l=e[3],o=r+r,u=n+n,a=i+i,s=r*o,c=r*u,f=r*a,h=n*u,E=n*a,d=i*a,v=l*o,T=l*u,g=l*a;return t[0]=1-(h+d),t[1]=c-g,t[2]=f+T,t[3]=0,t[4]=c+g,t[5]=1-(s+d),t[6]=E-v,t[7]=0,t[8]=f-T,t[9]=E+v,t[10]=1-(s+h),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:"slerp",value:function(e,t,r,n){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],l=1-i*i;if(l<=0)n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3];else if(l=Math.sqrt(l),Math.abs(l)<1e-4)n[0]=.5*e[0]+.5*t[0],n[1]=.5*e[1]+.5*t[1],n[2]=.5*e[2]+.5*t[2],n[3]=.5*e[3]+.5*t[3];else{var o=Math.acos(i),u=o*r,a=Math.sin(o-u)/l,s=Math.sin(u)/l;n[0]=e[0]*a+t[0]*s,n[1]=e[1]*a+t[1]*s,n[2]=e[2]*a+t[2]*s,n[3]=e[3]*a+t[3]*s}return n}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){function e(){n(this,e)}return i(e,null,[{key:"plane",value:function(e,t,r){var n=void 0,i=void 0;return n=e/2,i=t/2,tc=r||[1,1,1,1],{position:[-n,i,0,n,i,0,-n,-i,0,n,-i,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],color:[r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3],r[0],r[1],r[2],r[3]],texCoord:[0,0,1,0,0,1,1,1],index:[0,1,2,2,1,3]}}},{key:"torus",value:function(e,t,r,n,i){var l=void 0,o=void 0,u=[],a=[],s=[],c=[],f=[];for(l=0;l<=e;l++){var h=2*Math.PI/e*l,E=Math.cos(h),d=Math.sin(h);for(o=0;o<=t;o++){var v=2*Math.PI/t*o,T=(E*r+n)*Math.cos(v),g=d*r,R=(E*r+n)*Math.sin(v),y=E*Math.cos(v),m=E*Math.sin(v),_=1/t*o,b=1/e*l+.5;b>1&&(b-=1),b=1-b,u.push(T,g,R),a.push(y,d,m),s.push(i[0],i[1],i[2],i[3]),c.push(_,b)}}for(l=0;l<e;l++)for(o=0;o<t;o++){var p=(t+1)*l+o;f.push(p,p+t+1,p+1),f.push(p+t+1,p+t+2,p+1)}return{position:u,normal:a,color:s,texCoord:c,index:f}}},{key:"sphere",value:function(e,t,r,n){var i=void 0,l=void 0,o=[],u=[],a=[],s=[],c=[];for(i=0;i<=e;i++){var f=Math.PI/e*i,h=Math.cos(f),E=Math.sin(f);for(l=0;l<=t;l++){var d=2*Math.PI/t*l,v=E*r*Math.cos(d),T=h*r,g=E*r*Math.sin(d),R=E*Math.cos(d),y=E*Math.sin(d);o.push(v,T,g),u.push(R,h,y),a.push(n[0],n[1],n[2],n[3]),s.push(1-1/t*l,1/e*i)}}for(i=0;i<e;i++)for(l=0;l<t;l++){var m=(t+1)*i+l;c.push(m,m+1,m+t+2),c.push(m,m+t+2,m+t+1)}return{position:o,normal:u,color:a,texCoord:s,index:c}}},{key:"cube",value:function(e,t){for(var r=.5*e,n=[-r,-r,r,r,-r,r,r,r,r,-r,r,r,-r,-r,-r,-r,r,-r,r,r,-r,r,-r,-r,-r,r,-r,-r,r,r,r,r,r,r,r,-r,-r,-r,-r,r,-r,-r,r,-r,r,-r,-r,r,r,-r,-r,r,r,-r,r,r,r,r,-r,r,-r,-r,-r,-r,-r,r,-r,r,r,-r,r,-r],i=1/Math.sqrt(3),l=[-i,-i,i,i,-i,i,i,i,i,-i,i,i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i,-i,-i,i,-i,-i,i,i,i,i,i,i,i,-i,-i,-i,-i,i,-i,-i,i,-i,i,-i,-i,i,i,-i,-i,i,i,-i,i,i,i,i,-i,i,-i,-i,-i,-i,-i,i,-i,i,i,-i,i,-i],o=[],u=0;u<n.length/3;u++)o.push(t[0],t[1],t[2],t[3]);return{position:n,normal:l,color:o,texCoord:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],index:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(){function e(){n(this,e)}return i(e,null,[{key:"hsva",value:function(e,t,r,n){if(!(t>1||r>1||n>1)){var i=e%360,l=Math.floor(i/60),o=i/60-l,u=r*(1-t),a=r*(1-t*o),s=r*(1-t*(1-o)),c=new Array;if(!t>0&&!t<0)c.push(r,r,r,n);else{var f=new Array(r,a,u,u,s,r),h=new Array(s,r,r,a,u,u),E=new Array(u,u,s,r,r,a);c.push(f[l],h[l],E[l],n)}return c}}},{key:"easeLiner",value:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},{key:"easeOutCubic",value:function(e){return(e=e/1-1)*e*e+1}},{key:"easeQuintic",value:function(e){var t=(e/=1)*e;return t*e*t}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),u=n(o),a=r(2),s=n(a),c=r(3),f=n(c),h=r(4),E=n(h),d=r(1),v=n(d),T=function(){function e(){i(this,e),this.VERSION="0.1.2",this.PI2=6.283185307179586,this.PI=3.141592653589793,this.PIH=1.5707963267948966,this.PIH2=.7853981633974483,this.TEXTURE_UNIT_COUNT=null,this.ready=!1,this.canvas=null,this.gl=null,this.textures=null,this.ext=null,this.Audio=u.default,this.Mesh=f.default,this.Util=E.default,this.Gui=new v.default,this.Math=new s.default,console.log("%c◆%c glcubic.js %c◆%c : version %c"+this.VERSION,"color: crimson","","color: crimson","","color: royalblue")}return l(e,[{key:"init",value:function(e,t){var r=t||{};return this.ready=!1,null!=e&&(e instanceof HTMLCanvasElement?this.canvas=e:"[object String]"===Object.prototype.toString.call(e)&&(this.canvas=document.getElementById(e)),null!=this.canvas&&(this.gl=this.canvas.getContext("webgl",r)||this.canvas.getContext("experimental-webgl",r),null!=this.gl&&(this.ready=!0,this.TEXTURE_UNIT_COUNT=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.textures=new Array(this.TEXTURE_UNIT_COUNT)),this.ext={elementIndexUint:this.gl.getExtension("OES_element_index_uint"),textureFloat:this.gl.getExtension("OES_texture_float"),drawBuffers:this.gl.getExtension("WEBGL_draw_buffers")},this.ready))}},{key:"sceneClear",value:function(e,t,r){var n=this.gl,i=n.COLOR_BUFFER_BIT;n.clearColor(e[0],e[1],e[2],e[3]),null!=t&&(n.clearDepth(t),i|=n.DEPTH_BUFFER_BIT),null!=r&&(n.clearStencil(r),i|=n.STENCIL_BUFFER_BIT),n.clear(i)}},{key:"sceneView",value:function(e,t,r,n){var i=e||0,l=t||0,o=r||window.innerWidth,u=n||window.innerHeight;this.gl.viewport(i,l,o,u)}},{key:"drawArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawArrays(e,r,t)}},{key:"drawElements",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawElements(e,t,this.gl.UNSIGNED_SHORT,r)}},{key:"drawElementsInt",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.gl.drawElements(e,t,this.gl.UNSIGNED_INT,r)}},{key:"createVbo",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),t}}},{key:"createIbo",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Int16Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),t}}},{key:"createIboInt",value:function(e){if(null!=e){var t=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(e),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),t}}},{key:"createTextureFromFile",value:function(e,t,r){var n=this;if(null!=e&&null!=t){var i=new Image,l=this.gl;i.onload=function(){n.textures[t]={texture:null,type:null,loaded:!1};var o=l.createTexture();l.bindTexture(l.TEXTURE_2D,o),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,i),l.generateMipmap(l.TEXTURE_2D),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),n.textures[t].texture=o,n.textures[t].type=l.TEXTURE_2D,n.textures[t].loaded=!0,console.log("%c◆%c texture number: %c"+t+"%c, file loaded: %c"+e,"color: crimson","","color: blue","","color: goldenrod"),l.bindTexture(l.TEXTURE_2D,null),null!=r&&r(t)},i.src=e}}},{key:"createTextureFromObject",value:function(e,t){if(null!=e&&null!=t){var r=this.gl,n=r.createTexture();this.textures[t]={texture:null,type:null,loaded:!1},r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.textures[t].texture=n,this.textures[t].type=r.TEXTURE_2D,this.textures[t].loaded=!0,console.log("%c◆%c texture number: %c"+t+"%c, object attached","color: crimson","","color: blue",""),r.bindTexture(r.TEXTURE_2D,null)}}},{key:"createTextureCubeFromFile",value:function(e,t,r,n){var i=this;if(null!=e&&null!=t&&null!=r){var l=[],o=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};for(var u=0;u<e.length;u++)l[u]={image:new Image,loaded:!1},l[u].image.onload=function(u){return function(){if(l[u].loaded=!0,6===l.length){var a=!0;if(l.map(function(e){a=a&&e.loaded}),!0===a){var s=o.createTexture();o.bindTexture(o.TEXTURE_CUBE_MAP,s);for(var c=0;c<e.length;c++)o.texImage2D(t[c],0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,l[c].image);o.generateMipmap(o.TEXTURE_CUBE_MAP),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),i.textures[r].texture=s,i.textures[r].type=o.TEXTURE_CUBE_MAP,i.textures[r].loaded=!0,console.log("%c◆%c texture number: %c"+r+"%c, file loaded: %c"+e[0]+"...","color: crimson","","color: blue","","color: goldenrod"),o.bindTexture(o.TEXTURE_CUBE_MAP,null),null!=n&&n(r)}}}}(u),l[u].image.src=e[u]}}},{key:"bindTexture",value:function(e,t){null!=this.textures[t]&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.gl.bindTexture(this.textures[t].type,this.textures[t].texture))}},{key:"isTextureLoaded",value:function(){var e=void 0,t=void 0,r=void 0,n=void 0;for(r=!0,n=!1,e=0,t=this.textures.length;e<t;e++)null!=this.textures[e]&&(n=!0,r=r&&this.textures[e].loaded);return!!n&&r}},{key:"createFramebuffer",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){var n=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};var i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i);var l=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,l),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,l);var o=n.createTexture();return n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=o,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%c◆%c texture number: %c"+r+"%c, framebuffer created","color: crimson","","color: blue",""),{framebuffer:i,depthRenderbuffer:l,texture:o}}}},{key:"createFramebufferStencil",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){var n=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};var i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i);var l=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,l),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,l);var o=n.createTexture();return n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=o,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%c◆%c texture number: %c"+r+"%c, framebuffer created (enable stencil)","color: crimson","","color: blue",""),{framebuffer:i,depthStencilRenderbuffer:l,texture:o}}}},{key:"createFramebufferFloat",value:function(e,t,r){if(null!=e&&null!=t&&null!=r){var n=this.gl;this.textures[r]={texture:null,type:null,loaded:!1};var i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i);var l=n.createTexture();return n.bindTexture(n.TEXTURE_2D,l),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.FLOAT,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,l,0),n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),this.textures[r].texture=l,this.textures[r].type=n.TEXTURE_2D,this.textures[r].loaded=!0,console.log("%c◆%c texture number: %c"+r+"%c, framebuffer created (enable float)","color: crimson","","color: blue",""),{framebuffer:i,depthRenderbuffer:null,texture:l}}}},{key:"createFramebufferCube",value:function(e,t,r,n){if(null!=e&&null!=t&&null!=r&&null!=n){var i=this.gl;this.textures[n]={texture:null,type:null,loaded:!1};var l=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,l);var o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,e,t),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,o);var u=i.createTexture();i.bindTexture(i.TEXTURE_CUBE_MAP,u);for(var a=0;a<r.length;a++)i.texImage2D(r[a],0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null);return i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_CUBE_MAP,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),this.textures[n].texture=u,this.textures[n].type=i.TEXTURE_CUBE_MAP,this.textures[n].loaded=!0,console.log("%c◆%c texture number: %c"+n+"%c, framebuffer cube created","color: crimson","","color: blue",""),{framebuffer:l,depthRenderbuffer:o,texture:u}}}},{key:"createProgramFromId",value:function(e,t,r,n,i,l){if(null==this.gl)return null;var o=void 0,u=new g(this.gl);for(u.vs=u.createShaderFromId(e),u.fs=u.createShaderFromId(t),u.prg=u.createProgram(u.vs,u.fs),u.attL=new Array(r.length),u.attS=new Array(r.length),o=0;o<r.length;o++)u.attL[o]=this.gl.getAttribLocation(u.prg,r[o]),u.attS[o]=n[o];for(u.uniL=new Array(i.length),o=0;o<i.length;o++)u.uniL[o]=this.gl.getUniformLocation(u.prg,i[o]);return u.uniT=l,u.locationCheck(r,i),u}},{key:"createProgramFromSource",value:function(e,t,r,n,i,l){if(null==this.gl)return null;var o=void 0,u=new g(this.gl);for(u.vs=u.createShaderFromSource(e,this.gl.VERTEX_SHADER),u.fs=u.createShaderFromSource(t,this.gl.FRAGMENT_SHADER),u.prg=u.createProgram(u.vs,u.fs),u.attL=new Array(r.length),u.attS=new Array(r.length),o=0;o<r.length;o++)u.attL[o]=this.gl.getAttribLocation(u.prg,r[o]),u.attS[o]=n[o];for(u.uniL=new Array(i.length),o=0;o<i.length;o++)u.uniL[o]=this.gl.getUniformLocation(u.prg,i[o]);return u.uniT=l,u.locationCheck(r,i),u}},{key:"createProgramFromFile",value:function(e,t,r,n,i,l,o){function u(e,t){var r=new XMLHttpRequest;r.open("GET",t.targetUrl,!0),r.setRequestHeader("Pragma","no-cache"),r.setRequestHeader("Cache-Control","no-cache"),r.onload=function(){console.log("%c◆%c shader file loaded: %c"+t.targetUrl,"color: crimson","","color: goldenrod"),t.source=r.responseText,a(e)},r.send()}function a(e){if(null!=c.vs.source&&null!=c.fs.source){var t=void 0;for(s.vs=s.createShaderFromSource(c.vs.source,e.VERTEX_SHADER),s.fs=s.createShaderFromSource(c.fs.source,e.FRAGMENT_SHADER),s.prg=s.createProgram(s.vs,s.fs),s.attL=new Array(r.length),s.attS=new Array(r.length),t=0;t<r.length;t++)s.attL[t]=e.getAttribLocation(s.prg,r[t]),s.attS[t]=n[t];for(s.uniL=new Array(i.length),t=0;t<i.length;t++)s.uniL[t]=e.getUniformLocation(s.prg,i[t]);s.uniT=l,s.locationCheck(r,i),o(s)}}if(null==this.gl)return null;var s=new g(this.gl),c={vs:{targetUrl:e,source:null},fs:{targetUrl:t,source:null}};return u(this.gl,c.vs),u(this.gl,c.fs),s}}]),e}();t.default=T;var g=function(){function e(t){i(this,e),this.gl=t,this.vs=null,this.fs=null,this.prg=null,this.attL=null,this.attS=null,this.uniL=null,this.uniT=null}return l(e,[{key:"createShaderFromId",value:function(e){var t=void 0,r=document.getElementById(e);if(r){switch(r.type){case"x-shader/x-vertex":t=this.gl.createShader(this.gl.VERTEX_SHADER);break;case"x-shader/x-fragment":t=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}if(this.gl.shaderSource(t,r.text),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))return t;console.warn("◆ compile failed of shader: "+this.gl.getShaderInfoLog(t))}}},{key:"createShaderFromSource",value:function(e,t){var r=void 0;switch(t){case this.gl.VERTEX_SHADER:r=this.gl.createShader(this.gl.VERTEX_SHADER);break;case this.gl.FRAGMENT_SHADER:r=this.gl.createShader(this.gl.FRAGMENT_SHADER);break;default:return}if(this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))return r;console.warn("◆ compile failed of shader: "+this.gl.getShaderInfoLog(r))}},{key:"createProgram",value:function(e,t){var r=this.gl.createProgram();if(this.gl.attachShader(r,e),this.gl.attachShader(r,t),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS))return this.gl.useProgram(r),r;console.warn("◆ link program failed: "+this.gl.getProgramInfoLog(r))}},{key:"useProgram",value:function(){this.gl.useProgram(this.prg)}},{key:"setAttribute",value:function(e,t){var r=this.gl;for(var n in e)this.attL[n]>=0&&(r.bindBuffer(r.ARRAY_BUFFER,e[n]),r.enableVertexAttribArray(this.attL[n]),r.vertexAttribPointer(this.attL[n],this.attS[n],r.FLOAT,!1,0,0));null!=t&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t)}},{key:"pushShader",value:function(e){for(var t=this.gl,r=0,n=this.uniT.length;r<n;r++){var i="uniform"+this.uniT[r].replace(/matrix/i,"Matrix");null!=t[i]?-1!==i.search(/Matrix/)?t[i](this.uniL[r],!1,e[r]):t[i](this.uniL[r],e[r]):console.warn("◆ not support uniform type: "+this.uniT[r])}}},{key:"locationCheck",value:function(e,t){var r=void 0,n=void 0;for(r=0,n=e.length;r<n;r++)(null==this.attL[r]||this.attL[r]<0)&&console.warn('◆ invalid attribute location: %c"'+e[r]+'"',"color: crimson");for(r=0,n=t.length;r<n;r++)(null==this.uniL[r]||this.uniL[r]<0)&&console.warn('◆ invalid uniform location: %c"'+t[r]+'"',"color: crimson")}}]),e}();window.gl3=window.gl3||new T}]);